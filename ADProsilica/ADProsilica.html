

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ADProsilica &mdash; areaDetector Support</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme_overrides.css?v=254ed751" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Example st.cmd Startup File" href="st_cmd.html" />
    <link rel="prev" title="ADPointGrey" href="../ADPointGrey/PointGreyDoc.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            areaDetector
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../readme.html">Readme</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../user_guide.html">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../ADCore/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ADCore/arch.html">Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ADCore/asynPortDriver.html">asynPortDriver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ADCore/NDArray.html">NDArray</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../detector_drivers.html">Detector Drivers</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../ADCore/guidelines.html">Guidelines and rules for drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADCore/ADDriver.html">ADDriver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADAndor/andorDoc.html">ADAndor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADAndor3/ADAndorDoc.html">ADAndor3</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADAravis/ADAravis.html">ADAravis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADCSimDetector/ADCSimDetectorDoc.html">ADCSimDetector</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADDexela/ADDexela.html">ADDexela</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADEiger/eiger.html">ADEiger</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADEuresys/ADEuresys.html">ADEuresys</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADFastCCD/index.html">ADFastCCD</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADGenICam/ADGenICam.html">ADGenICam</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADHamamatsuDCAM/ADHamamatsuDCAM.html">ADHamamatsuDCAM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADLambda/ADLambda.html">ADLambda</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADLightField/ADLightField.html">ADLightField</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADmarCCD/marCCDDoc.html">ADmarCCD</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADmar345/mar345Doc.html">ADmar345</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADPerkinElmer/PerkinElmerDoc.html">ADPerkinElmer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADPICam/PICamDoc.html">ADPICam</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADPilatus/pilatusDoc.html">ADPilatus</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADPixirad/ADPixirad.html">ADPixirad</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADPointGrey/PointGreyDoc.html">ADPointGrey</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">ADProsilica</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#implementation-of-standard-driver-parameters">Implementation of standard driver parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#prosilica-specific-parameters">Prosilica specific parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-st-cmd-startup-file">Example st.cmd startup file</a></li>
<li class="toctree-l4"><a class="reference internal" href="#medm-screens">MEDM screens</a></li>
<li class="toctree-l4"><a class="reference internal" href="#connection-management">Connection management</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ADPvCam/pvcamDoc.html">ADPvCam</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADPylon/ADPylon.html">ADPylon</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADQImaging/QImagingDoc.html">ADQImaging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADRIXSCam/ADRIXSCam.html">ADRIXSCam</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADSimDetector/simDetector.html">ADSimDetector</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADSpinnaker/ADSpinnaker.html">ADSpinnaker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADTimePix3/ADTimePix3.html">ADTimePix3</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADVimba/ADVimba.html">ADVimba</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADURL/ADURL.html">ADURL</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADUVC/ADUVC.html">ADUVC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../NDDriverStdArrays/NDDriverStdArraysDoc.html">NDDriverStdArrays</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pvaDriver/pvaDriver.html">pvaDriver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../specsAnalyser/index.html">specsAnalyser</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ADCore/plugins.html">areaDetector Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../additional_plugins.html">Additional plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ADCore/medm.html">MEDM screens</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ADViewers/ad_viewers.html">areaDetector Viewers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../acknowledgements.html">Acknowledgements and licenses</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../install_guide.html">Install Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">Top-level Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ADCore_release.html">ADCore Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ADSupport_release.html">ADSupport Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doxygen.html">Source Code Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../detectors.html">Supported Detectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../legacy_versions.html">Legacy Versions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">areaDetector</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../user_guide.html">areaDetector Users Guide</a></li>
          <li class="breadcrumb-item"><a href="../detector_drivers.html">Detector Drivers</a></li>
      <li class="breadcrumb-item active">ADProsilica</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/ADProsilica/ADProsilica.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="adprosilica">
<h1><a class="toc-backref" href="#id1" role="doc-backlink">ADProsilica</a><a class="headerlink" href="#adprosilica" title="Link to this heading"></a></h1>
<dl class="field-list simple">
<dt class="field-odd">author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Mark Rivers, University of Chicago</p>
</dd>
</dl>
<nav class="contents" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#adprosilica" id="id1">ADProsilica</a></p>
<ul>
<li><p><a class="reference internal" href="#overview" id="id2">Overview</a></p></li>
<li><p><a class="reference internal" href="#implementation-of-standard-driver-parameters" id="id3">Implementation of standard driver parameters</a></p></li>
<li><p><a class="reference internal" href="#prosilica-specific-parameters" id="id4">Prosilica specific parameters</a></p></li>
<li><p><a class="reference internal" href="#configuration" id="id5">Configuration</a></p></li>
<li><p><a class="reference internal" href="#example-st-cmd-startup-file" id="id6">Example st.cmd startup file</a></p></li>
<li><p><a class="reference internal" href="#medm-screens" id="id7">MEDM screens</a></p></li>
<li><p><a class="reference internal" href="#connection-management" id="id8">Connection management</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="overview">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Overview</a><a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>This is an <a class="reference internal" href="../index.html"><span class="doc">areaDetector</span></a> driver for Gigabit Ethernet and
Firewire cameras from <a class="reference external" href="https://www.alliedvision.com">Allied Vision
Technologies</a>, who purchased Prosilica.
The driver is supported under Windows, Linux and Mac OS X using the
vendor library provided for those operating systems.</p>
<p>This driver inherits from <a class="reference internal" href="../ADCore/ADDriver.html"><span class="doc">ADDriver</span></a>.
It implements nearly all of the parameters in
<a class="reference external" href="../areaDetectorDoxygenHTML/asyn_n_d_array_driver_8h.html">asynNDArrayDriver.h</a>
and in
<a class="reference external" href="../areaDetectorDoxygenHTML/_a_d_driver_8h.html">ADArrayDriver.h</a>. It
also implements a number of parameters that are specific to the
Prosilica cameras. The <a class="reference external" href="../areaDetectorDoxygenHTML/classprosilica.html">prosilica class
documentation</a> describes
this class in detail.</p>
</section>
<section id="implementation-of-standard-driver-parameters">
<span id="standardnotes"></span><h2><a class="toc-backref" href="#id3" role="doc-backlink">Implementation of standard driver parameters</a><a class="headerlink" href="#implementation-of-standard-driver-parameters" title="Link to this heading"></a></h2>
<p>The driver redefines the choices for several of the parameters defined
in <code class="docutils literal notranslate"><span class="pre">ADDriver.h</span></code>. The ADTriggerMode choices for the Prosilica are:</p>
<ul class="simple">
<li><p>Free Run (collects images as fast as allowed by the camera readout
and the exposure time)</p></li>
<li><p>Sync In 1 (external trigger on line 1)</p></li>
<li><p>Sync In 2 (external trigger on line 2)</p></li>
<li><p>Sync In 3 (external trigger on line 3)</p></li>
<li><p>Sync In 4 (external trigger on line 4)</p></li>
<li><p>Fixed Rate (collects images at a fixed rate)</p></li>
<li><p>Software (single software trigger)</p></li>
</ul>
<p>The Prosilica supports hardware timing input and output signals that are
supported in the driver.</p>
<p>The NDDataType choices for the Prosilica are:</p>
<ul class="simple">
<li><p>NDUInt8 (8-bit data)</p></li>
<li><p>NDUInt16 (12 or 16 bit data)</p></li>
</ul>
<p>The NDColorMode choices for the Prosilica are:</p>
<ul class="simple">
<li><p>NDColorModeMono (monochromatic data)</p></li>
<li><p>NDColorModeBayer (raw Bayer data)</p></li>
<li><p>NDColorModeRGB1 (RGB1 data)</p></li>
</ul>
<p>The color Prosilica cameras are also capable of various YUV color
formats but these are not supported in the driver. They may be added in
a future release.</p>
</section>
<section id="prosilica-specific-parameters">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Prosilica specific parameters</a><a class="headerlink" href="#prosilica-specific-parameters" title="Link to this heading"></a></h2>
<p>The Prosilica driver implements the following parameters in addition to
those in asynNDArrayDriver.h and ADDriver.h:</p>
<table class="table-bordered table-striped table-hover docutils align-default">
<colgroup>
<col style="width: 60.0%" />
<col style="width: 20.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head" colspan="3"><p>Parameter Definitions in prosilica.cpp and EPICS Record Definitions in prosilica.template</p></th>
</tr>
<tr class="row-even"><th class="head"><p>Description</p></th>
<th class="head"><p>EPICS record name</p></th>
<th class="head"><p>EPICS record type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-odd"><td colspan="3"><p><strong>Bayer Color Conversion</strong></p></td>
</tr>
<tr class="row-even"><td><p>Color conversion when NDColorMode is Bayer.  Choices are:</p>
<ul class="simple">
<li><p>None: Raw Bayer images are passed to the plugins</p></li>
<li><p>RGB1: Bayer images are converted to RGB1</p></li>
<li><p>RGB2: Bayer images are converted to RGB2</p></li>
<li><p>RGB3: Bayer images are converted to RGB3</p></li>
</ul>
<p>Having the camera send Bayer images uses 3 times less network bandwidth than
sending RGB1 images.  It does place more CPU load on the host to convert
from Bayer to RGB, but this is often an acceptable tradeoff.</p>
</td>
<td><p>$(P)$(R)BayerConvert, $(P)$(R)BayerConvert_RBV</p></td>
<td><p>mbbo, mbbi</p></td>
</tr>
<tr class="row-odd"><td colspan="3"><p><strong>Trigger and I/O Control</strong></p></td>
</tr>
<tr class="row-even"><td><p>The edge or level for the selected trigger signal when ADTriggerMode=Sync In 1 to
SyncIn 4. Allowed values are:, Rising edge, Falling edge, Any edge, High level, Low level</p></td>
<td><p>$(P)$(R)TriggerEvent, $(P)$(R)TriggerEvent_RBV</p></td>
<td><p>mbbo, mbbi</p></td>
</tr>
<tr class="row-odd"><td><p>The delay in seconds between the trigger signal and when the frame is actually acquired.
Minimum value is 1 microsecond.</p></td>
<td><p>$(P)$(R)TriggerDelay, $(P)$(R)TriggerDelay_RBV</p></td>
<td><p>ao, ai</p></td>
</tr>
<tr class="row-even"><td><p>Controls the behavior when an external trigger signal arrives before the camera
is ready for the next trigger. Allowed values are:, Off - the external trigger is ignored, Previous frame - the external trigger is latched and triggers the next frame when
the current frame completes</p></td>
<td><p>$(P)$(R)TriggerOverlap, $(P)$(R)TriggerOverlap_RBV</p></td>
<td><p>mbbo, mbbi</p></td>
</tr>
<tr class="row-odd"><td><p>Processing this record performs a software trigger if ADTriggerMode=Software.</p></td>
<td><p>$(P)$(R)TriggerSoftware</p></td>
<td><p>bo</p></td>
</tr>
<tr class="row-even"><td><p>The level of the Sync In 1 signal</p></td>
<td><p>$(P)$(R)SyncIn1Level_RBV</p></td>
<td><p>bi</p></td>
</tr>
<tr class="row-odd"><td><p>The level of the Sync In 2 signal</p></td>
<td><p>$(P)$(R)SyncIn2Level_RBV</p></td>
<td><p>bi</p></td>
</tr>
<tr class="row-even"><td><p>The mode of the Sync Out 1 signal. Allowed values are:</p>
<ul class="simple">
<li><p>GPO (general purpose output)</p></li>
<li><p>AcqTrigReady</p></li>
<li><p>FrameTrigReady</p></li>
<li><p>FrameTrigger</p></li>
<li><p>Exposing</p></li>
<li><p>FrameReadout</p></li>
<li><p>Imaging</p></li>
<li><p>Acquiring</p></li>
<li><p>SyncIn1</p></li>
<li><p>SyncIn2</p></li>
<li><p>SyncIn3</p></li>
<li><p>SyncIn4</p></li>
<li><p>Strobe1</p></li>
<li><p>Strobe2</p></li>
<li><p>Strobe3</p></li>
<li><p>Strobe4</p></li>
</ul>
</td>
<td><p>$(P)$(R)SyncOut1Mode, $(P)$(R)SyncOut1Mode_RBV</p></td>
<td><p>mbbo, mbbi</p></td>
</tr>
<tr class="row-odd"><td><p>The level of the Sync Out 1 signal. This is only programmable when SyncOut1Mode=GPO.</p></td>
<td><p>$(P)$(R)SyncOut1Level, $(P)$(R)SyncOut1Level_RBV</p></td>
<td><p>bo, bi</p></td>
</tr>
<tr class="row-even"><td><p>Flag to invert the Sync Out 1 signal.</p></td>
<td><p>$(P)$(R)SyncOut1Invert, $(P)$(R)SyncOut1Invert_RBV</p></td>
<td><p>bo, bi</p></td>
</tr>
<tr class="row-odd"><td><p>The mode of the Sync Out 2 signal. Allowed values are the same as for PSSyncOut1Mode.</p></td>
<td><p>$(P)$(R)SyncOut2Mode, $(P)$(R)SyncOut2Mode_RBV</p></td>
<td><p>mbbo, mbbi</p></td>
</tr>
<tr class="row-even"><td><p>The level of the Sync Out 2 signal. This is only programmable when SyncOut2Mode=GPO.</p></td>
<td><p>$(P)$(R)SyncOut2Level, $(P)$(R)SyncOut1Level_RBV</p></td>
<td><p>bo, bi</p></td>
</tr>
<tr class="row-odd"><td><p>Flag to invert the Sync Out 2 signal.</p></td>
<td><p>$(P)$(R)SyncOut2Invert, $(P)$(R)SyncOut2Invert_RBV</p></td>
<td><p>bo, bi</p></td>
</tr>
<tr class="row-even"><td><p>The mode of the Sync Out 3 signal. Allowed values are the same as for PSSyncOut1Mode.</p></td>
<td><p>$(P)$(R)SyncOut3Mode, $(P)$(R)SyncOut3Mode_RBV</p></td>
<td><p>mbbo, mbbi</p></td>
</tr>
<tr class="row-odd"><td><p>The level of the Sync Out 3 signal. This is only programmable when SyncOut3Mode=GPO.</p></td>
<td><p>$(P)$(R)SyncOut3Level, $(P)$(R)SyncOut3Level_RBV</p></td>
<td><p>bo, bi</p></td>
</tr>
<tr class="row-even"><td><p>Flag to invert the Sync Out 3 signal.</p></td>
<td><p>$(P)$(R)SyncOut3Invert, $(P)$(R)SyncOut3Invert_RBV</p></td>
<td><p>bo, bi</p></td>
</tr>
<tr class="row-odd"><td><p>The mode of the Strobe 1 signal. The Strobe signals are based on the following values,
but allow for changing the delay and width relative to the underlying value. Any
of the outputs can be set to the Stobe1 value, rather than the raw values of these
signals. Allowed values are:</p>
<ul class="simple">
<li><p>AcqTrigReady</p></li>
<li><p>FrameTrigReady</p></li>
<li><p>FrameTrigger</p></li>
<li><p>Exposing</p></li>
<li><p>FrameReadout</p></li>
<li><p>Acquiring</p></li>
<li><p>SyncIn1</p></li>
<li><p>SyncIn2</p></li>
<li><p>SyncIn3</p></li>
<li><p>SyncIn4</p></li>
</ul>
</td>
<td><p>$(P)$(R)Strobe1Mode, $(P)$(R)Strobe1Mode_RBV</p></td>
<td><p>mbbo, mbbi</p></td>
</tr>
<tr class="row-even"><td><p>Flag to allow controlling the strobe duration.</p></td>
<td><p>$(P)$(R)Strobe1CtlDuration, $(P)$(R)Strobe1CtlDuration_RBV</p></td>
<td><p>bo, bi</p></td>
</tr>
<tr class="row-odd"><td><p>The strobe duration if PSStrobe1CtlDuration is On.</p></td>
<td><p>$(P)$(R)Strobe1Duration, $(P)$(R)Strobe1Duration_RBV</p></td>
<td><p>ao, ai</p></td>
</tr>
<tr class="row-even"><td><p>The strobe delay relative to the underlying signal that the strobe is based on.</p></td>
<td><p>$(P)$(R)Strobe1Delay, $(P)$(R)Strobe1Delay_RBV</p></td>
<td><p>ao, ai</p></td>
</tr>
<tr class="row-odd"><td colspan="3"><p><strong>Timestamp Control</strong></p></td>
</tr>
<tr class="row-even"><td><p>Resets the timestamp timer in the camera. If PSTimestampType is POSIX or EPICS then
it also stores the current POSIX or EPICS time in the driver.</p></td>
<td><p>$(P)$(R)PSResetTimer</p></td>
<td><p>longout</p></td>
</tr>
<tr class="row-odd"><td><p>Controls the type of timestamp in the timeStamp field of each NDArray. Choices are:</p>
<ul class="simple">
<li><p>NativeTicks: The number of internal camera clock ticks which have elapsed since the last timer reset.</p></li>
<li><p>NativeSeconds: The number of seconds which have elapsed since the last timer reset.
This is NativeTicks divided by the internal camera clock frequency.</p></li>
<li><p>POSIX: The number of seconds since the POSIX Epoch (00:00:00 UTC, January 1, 1970).</p></li>
<li><p>EPICS: The number of seconds since the EPICS Epoch (January 1, 1990).</p></li>
<li><p>IOC: The number of seconds since the EPICS Epoch (January 1, 1990).</p></li>
</ul>
<p>The POSIX and EPICS timestamps are calculated as follows: when the timer is reset
the current POSIX or EPICS time is stored, and the internal camera timer is reset.
The timestamps are then computed by adding the camera ticks (converted to seconds)
to the stored POSIX or EPICS time. Thus, the relative times of each frame are accurately
controlled by the internal camera clock. The accuracy of the absolute time is determined
by the accuracy of the time of day clock in the IOC computer.</p>
<p>The IOC timestamp is simply the time returned by epicsTimeGetCurrent(), and does not
use the camera tick clock at all.</p>
</td>
<td><p>$(P)$(R)PSTimestampType, $(P)$(R)PSTimestampType_RBV</p></td>
<td><p>mbbo, mbbi</p></td>
</tr>
<tr class="row-even"><td colspan="3"><p><strong>Statistics Information</strong></p></td>
</tr>
<tr class="row-odd"><td><p>Read the Gigabit Ethernet statistics when 1</p></td>
<td><p>$(P)$(R)PSReadStatistics</p></td>
<td><p>longout</p></td>
</tr>
<tr class="row-even"><td><p>Driver type</p></td>
<td><p>$(P)$(R)PSDriverType_RBV</p></td>
<td><p>stringin</p></td>
</tr>
<tr class="row-odd"><td><p>Packet filter version</p></td>
<td><p>$(P)$(R)PSFilterVersion_RBV</p></td>
<td><p>stringin</p></td>
</tr>
<tr class="row-even"><td><p>Frame rate (Hz)</p></td>
<td><p>$(P)$(R)PSFrameRate_RBV</p></td>
<td><p>ai</p></td>
</tr>
<tr class="row-odd"><td><p>Stream bytes per second in the PvAPI driver. This allows limiting the bandwidth
that a camera uses. It also allows operation of GigE cameras on non-Gigabit Ethernet
networks by decreasing the value to maximum that the network supports. The default
of 115000000 allows full-speed operation on GigE networks.</p></td>
<td><p>$(P)$(R)PSByteRate, $(P)$(R)PSByteRate_RBV</p></td>
<td><p>longout, longin</p></td>
</tr>
<tr class="row-even"><td><p>Actual packet size of Ethernet packets. When connecting to the camera the driver
always automatically negotiates the largest packet size that the camera and IOC
computer support.</p></td>
<td><p>$(P)$(R)PSPacketSize_RBV</p></td>
<td><p>longin</p></td>
</tr>
<tr class="row-odd"><td><p>Number of frames completed</p></td>
<td><p>$(P)$(R)PSFramesCompleted_RBV</p></td>
<td><p>longin</p></td>
</tr>
<tr class="row-even"><td><p>Number of frames dropped</p></td>
<td><p>$(P)$(R)PSFramesDropped_RBV</p></td>
<td><p>longin</p></td>
</tr>
<tr class="row-odd"><td><p>Number of erroneous packets</p></td>
<td><p>$(P)$(R)PSPacketsErroneous_RBV</p></td>
<td><p>longin</p></td>
</tr>
<tr class="row-even"><td><p>Number of missed packets</p></td>
<td><p>$(P)$(R)PSPacketsMissed_RBV</p></td>
<td><p>longin</p></td>
</tr>
<tr class="row-odd"><td><p>Number of received packets</p></td>
<td><p>$(P)$(R)PSPacketsReceived_RBV</p></td>
<td><p>longin</p></td>
</tr>
<tr class="row-even"><td><p>Number of packets requested</p></td>
<td><p>$(P)$(R)PSPacketsRequested_RBV</p></td>
<td><p>longin</p></td>
</tr>
<tr class="row-odd"><td><p>Number of packets resent</p></td>
<td><p>$(P)$(R)PSPacketsResent_RBV</p></td>
<td><p>longin</p></td>
</tr>
<tr class="row-even"><td><p>Number of bad frames</p></td>
<td><p>$(P)$(R)PSBadFrameCounter_RBV</p></td>
<td><p>longin</p></td>
</tr>
</tbody>
</table>
</section>
<section id="configuration">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Configuration</a><a class="headerlink" href="#configuration" title="Link to this heading"></a></h2>
<p>The Prosilica driver is created with the <code class="docutils literal notranslate"><span class="pre">prosilicaConfig</span></code> command, either
from C/C++ or from the EPICS IOC shell.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">prosilicaConfig</span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">portName</span><span class="p">,</span>
<span class="w">                    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">cameraId</span><span class="p">,</span>
<span class="w">                    </span><span class="kt">int</span><span class="w"> </span><span class="n">maxBuffers</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">maxMemory</span><span class="p">,</span>
<span class="w">                    </span><span class="kt">int</span><span class="w"> </span><span class="n">priority</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">stackSize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">maxPvAPIFrames</span><span class="p">)</span>
</pre></div>
</div>
<p>The <strong>cameraId</strong> string can be any of the following:</p>
<ul class="simple">
<li><p>The camera’s UniqueId, which is a number assigned by the vendor to
each Prosilica camera, e.g. 50110.</p></li>
<li><p>The camera’s IP address, e.g. 164.54.160.48.</p></li>
<li><p>The camera’s IP DNS name, e.g. gse-prosilica1.cars.aps.anl.gov.</p></li>
</ul>
<p>Using the UniqueId has the advantage that the cameras can be configured
to use DHCP, and hence have non-predictable TCP/IP addresses. However,
if the UniqueId is used then the areaDetector IOC must be on the same
subnet as the camera, since cameras cannot be found by UniqueID through
routers. The simplest way to determine the uniqueId of a camera is to
run the Prosilica GigEViewer application, select the camera, and press
the “i” icon on the bottom of the main window to show the camera
information for this camera. The Unique ID will be displayed on the
first line in the information window.</p>
<p>The IP address or IP DNS name can be used for cameras with fixed IP
addresses, and <strong>must</strong> be used for cameras that are not on the local
subnet.</p>
<p>The maxPvAPIFrames parameter controls how many frame buffers will be
used by the PvAPI library. This is the last parameter in the
prosilicaConfig command, and if it is absent the default value of 2 is
used, which is sufficient in most circumstances. However, with very high
frame rates or busy IOCs increasing this value can reduce dropped
frames.</p>
<p>For details on the meaning of the other parameters to this function
refer to the detailed documentation on the prosilicaConfig function in
the <a class="reference external" href="../areaDetectorDoxygenHTML/prosilica_8cpp.html">prosilica.cpp
documentation</a> and in
the documentation for the constructor for the <a class="reference external" href="../areaDetectorDoxygenHTML/classprosilica.html">prosilica
class</a>.</p>
</section>
<section id="example-st-cmd-startup-file">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Example st.cmd startup file</a><a class="headerlink" href="#example-st-cmd-startup-file" title="Link to this heading"></a></h2>
<div class="toctree-wrapper compound">
</div>
<p>There is an example IOC boot directory and startup script
<a class="reference internal" href="st_cmd.html#adprosilica-st-cmd-example"><span class="std std-ref">st.cmd</span></a> provided with
areaDetector.</p>
</section>
<section id="medm-screens">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">MEDM screens</a><a class="headerlink" href="#medm-screens" title="Link to this heading"></a></h2>
<p>The following is the MEDM screen prosilica.adl.</p>
<figure class="align-center">
<img alt="../_images/prosilica.png" src="../_images/prosilica.png" />
</figure>
<p>The following is the MEDM screen that provides access to the specific
parameters for the Prosilica detector.</p>
<figure class="align-center">
<img alt="../_images/prosilicaMore.png" src="../_images/prosilicaMore.png" />
</figure>
<p>The following is an IDL
<a class="reference external" href="https://cars.uchicago.edu/software/idl/imaging_routines.html#epics_ad_display">epics_ad_display</a>
screen displaying the Prosilica detector images.</p>
<figure class="align-center">
<img alt="../_images/prosilica_tvscl.jpg" src="../_images/prosilica_tvscl.jpg" />
</figure>
</section>
<section id="connection-management">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Connection management</a><a class="headerlink" href="#connection-management" title="Link to this heading"></a></h2>
<p>The Prosilica driver implements connection management. Cameras do not
need to be accessible when the IOC starts up, and can be power-cycled or
disconnected and reconnected from the Ethernet without restarting the
IOC.</p>
<p>Whenever a new camera is detected on the network the Prosilica library
issues a callback to the driver. If the driver is not currently
connected to a camera it will attempt to connect when receiving the
callback. This mechanism should work no matter how the camera is
identified in the startup script, i.e. by Unique ID, IP address, or IP
name. It is also possible to manually connect and disconnect the camera
by using the <code class="docutils literal notranslate"><span class="pre">$(P)$(R)AsynIO.CNCT</span></code> PV, which is labeled “Connect” and
“Disconnect” on the medm screen.</p>
<p>If the camera is not accessible when the IOC boots, or is power-cycled
then the EPICS output records may not match the actual camera settings
and readbacks. They can be made to agree by processing the output
record, e.g. by pressing Enter or Return in the medm output widget. In
the future this may be improved by sending all of the EPICS settings to
the camera when it connects, though it is not clear if this would always
be the desired behavior.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../ADPointGrey/PointGreyDoc.html" class="btn btn-neutral float-left" title="ADPointGrey" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="st_cmd.html" class="btn btn-neutral float-right" title="Example st.cmd Startup File" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Mark Rivers.
      <span class="lastupdated">Last updated on 2025-May-25.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>