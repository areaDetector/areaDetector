<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ADLambda &mdash; areaDetector Support</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme_overrides.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            areaDetector
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../readme.html">Readme</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install_guide.html">Install Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">Top-level Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ADCore_release.html">ADCore Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ADSupport_release.html">ADSupport Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doxygen.html">Source Code Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../detectors.html">Supported Detectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../legacy_versions.html">Legacy Versions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">areaDetector</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">ADLambda</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/ADLambda/lambda.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="adlambda">
<h1><a class="toc-backref" href="#id2" role="doc-backlink">ADLambda</a><a class="headerlink" href="#adlambda" title="Link to this heading"></a></h1>
<dl class="field-list simple">
<dt class="field-odd">author<span class="colon">:</span></dt>
<dd class="field-odd"><p>John Hammonds, Keenan Lang, Mark Rivers</p>
</dd>
</dl>
<nav class="contents" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#adlambda" id="id2">ADLambda</a></p>
<ul>
<li><p><a class="reference internal" href="#introduction" id="id3">Introduction</a></p></li>
<li><p><a class="reference internal" href="#trigger-modes" id="id4">Trigger Modes</a></p></li>
<li><p><a class="reference internal" href="#implementation-of-standard-driver-parameters" id="id5">Implementation of standard driver parameters</a></p></li>
<li><p><a class="reference internal" href="#lambda-specific-parameters" id="id6">Lambda specific parameters</a></p>
<ul>
<li><p><a class="reference internal" href="#detector-status" id="id7">Detector Status</a></p></li>
<li><p><a class="reference internal" href="#acquisition-setup" id="id8">Acquisition Setup</a></p></li>
<li><p><a class="reference internal" href="#trigger-setup" id="id9">Trigger Setup</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#unsupported-standard-driver-parameters" id="id10">Unsupported standard driver parameters</a></p></li>
<li><p><a class="reference internal" href="#configuration" id="id11">Configuration</a></p></li>
<li><p><a class="reference internal" href="#medm-screens" id="id12">medm screens</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="introduction">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Introduction</a><a class="headerlink" href="#introduction" title="Link to this heading"></a></h2>
<p>This is an <a class="reference external" href="http://www.aps.anl.gov/epics">EPICS</a> <a class="reference external" href="https://areadetector.github.io/master/index.html">areaDetector</a> driver for the XSP Lambda detectors
from <a class="reference external" href="https://x-spectrum.de/">X-Spectrum</a>. It has been tested on the Lambda 250K, 750K, and 2M.
The driver communicates with the detector via the xsp library.</p>
<p>This driver inherits from <a class="reference external" href="https://areadetector.github.io/master/ADCore/ADDriver.html">ADDriver</a>. It implements many of the
parameters in <a class="reference external" href="https://areadetector.github.io/master/ADCore/NDArray.html#asynndarraydriver">asynNDArrayDriver</a> and in <a class="reference external" href="https://areadetector.github.io/master/ADCore/ADDriver.html">ADDriver</a>. It
also implements a number of parameters that are specific to the Lambda
detector. The <a class="reference external" href="https://areadetector.github.io/master/areaDetectorDoxygenHTML/classADLambda.html">ADLambda class</a> describes this class in detail.</p>
<p>This driver was built upon a multithreaded architecture. Each detector
is composed of any number of individual camera modules. An aquisition
thread is generated for each of the detector’s modules. Using offsets
listed in the Lambda detector’s configuration, the individual modules’
images are stitched into a combined NDArray, which an additional thread
is in charge of exporting to the areaDetector plugin pipeline.</p>
</section>
<section id="trigger-modes">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Trigger Modes</a><a class="headerlink" href="#trigger-modes" title="Link to this heading"></a></h2>
<p>There are three trigger modes available:</p>
<ul>
<li><p><strong>Internal</strong>: one internal trigger pulse generates one image</p></li>
<li><p><strong>External_SequencePer</strong>: rising edge on trigger input starts acquisition of all frames</p></li>
<li><dl>
<dt><strong>External_ImagePer</strong>:</dt><dd><p>for 24 bit depth, a rising edge on trigger input starts acquisition of one or more frames
with the programmed shutter time, trigger input is ignored until counter has been read out;</p>
<p>for all other bit depths, a rising edge on trigger input stops acquisition of current frame
and immediately starts acquisition of next frame, the programmed shutter time is ignored in
this case</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="implementation-of-standard-driver-parameters">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Implementation of standard driver parameters</a><a class="headerlink" href="#implementation-of-standard-driver-parameters" title="Link to this heading"></a></h2>
<p>The following table describes how the Eiger driver implements some of
the standard driver parameters defined in asynNDArrayDriver.h and ADDriver.h,
ADBase.template and NDFile.template</p>
<table class="table-bordered table-striped table-hover docutils align-default">
<colgroup>
<col style="width: 11%" />
<col style="width: 89%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>EPICS record name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>$(P)$(R)TriggerMode, $(P)$(R)TriggerMode_RBV</p></td>
<td><p>Sets the trigger mode for the detector. Options are:</p>
<ul class="simple">
<li><p>Internal</p></li>
<li><p>External_SequencePer</p></li>
<li><p>External_ImagePer</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>$(P)$(R)NumImages, $(P)$(R)NumImages_RBV</p></td>
<td><p>Sets the number of images to take</p></td>
</tr>
<tr class="row-even"><td><p>$(P)$(R)NumExposures, $(P)$(R)NumExposures_RBV</p></td>
<td><p>Not Used</p></td>
</tr>
<tr class="row-odd"><td><p>$(P)$(R)AcquireTime, $(P)$(R)AcquireTime_RBV</p></td>
<td><p>Sets the exposure time for a single frame.</p></td>
</tr>
<tr class="row-even"><td><p>$(P)$(R)AcquirePeriod, $(P)$(R)AcquirePeriod_RBV</p></td>
<td><p>Not Used</p></td>
</tr>
<tr class="row-odd"><td><p>$(P)$(R)DataType_RBV</p></td>
<td><p>DataType is set based on the Lambda’s operating mode parameter. When operating
with a 1- or 6- bit bit-depth, the DataType will be set to UInt8. For 12-bit,
the DataType is UInt16, and 24-bit is UInt32.</p></td>
</tr>
<tr class="row-even"><td><p>$(P)$(R)TemperatureActual</p></td>
<td><p>Not Used</p></td>
</tr>
<tr class="row-odd"><td><p>$(P)$(R)MaxSizeX_RBV</p></td>
<td><p>The size of the final, stitched frame in the X direction</p></td>
</tr>
<tr class="row-even"><td><p>$(P)$(R)MaxSizeY_RBV</p></td>
<td><p>The size of the final, stitched frame in the Y direction</p></td>
</tr>
<tr class="row-odd"><td><p>$(P)$(R)ArraySizeX_RBV</p></td>
<td><p>The size of the final, stitched frame in the X direction</p></td>
</tr>
<tr class="row-even"><td><p>$(P)$(R)ArraySizeY_RBV</p></td>
<td><p>The size of the final, stitched frame in the Y direction</p></td>
</tr>
<tr class="row-odd"><td><p>$(P)$(R)Manufacturer_RBV, $(P)$(R)Model_RBV</p></td>
<td><p>Set to “X-Spectrum GmbH”</p></td>
</tr>
<tr class="row-even"><td><p>$(P)$(R)SerialNumber_RBV</p></td>
<td><p>Not Used</p></td>
</tr>
<tr class="row-odd"><td><p>$(P)$(R)FirmwareVersion_RBV</p></td>
<td><p>Detector firmware version</p></td>
</tr>
<tr class="row-even"><td><p>$(P)$(R)SDKVersion_RBV</p></td>
<td><p>XSP Library version</p></td>
</tr>
<tr class="row-odd"><td><p>$(P)$(R)DriverVersion_RBV</p></td>
<td><p>Not Used</p></td>
</tr>
</tbody>
</table>
</section>
<section id="lambda-specific-parameters">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Lambda specific parameters</a><a class="headerlink" href="#lambda-specific-parameters" title="Link to this heading"></a></h2>
<p>The Lambda driver implements the following parameters in addition to those in asynNDArrayDriver.h and ADDriver.h.
Most records are in ADLambda.template, but there is a single record listed in LambdaModule.template which should be
loaded for each module that makes up the full detector.</p>
<section id="detector-status">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Detector Status</a><a class="headerlink" href="#detector-status" title="Link to this heading"></a></h3>
</section>
<section class="table-bordered table-striped table-hover" id="acquisition-setup">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Acquisition Setup</a><a class="headerlink" href="#acquisition-setup" title="Link to this heading"></a></h3>
</section>
<section class="table-bordered table-striped table-hover" id="trigger-setup">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Trigger Setup</a><a class="headerlink" href="#trigger-setup" title="Link to this heading"></a></h3>
<table class="table-bordered table-striped table-hover docutils align-default">
<colgroup>
<col style="width: 78%" />
<col style="width: 11%" />
<col style="width: 11%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Description</p></th>
<th class="head"><p>EPICS record name</p></th>
<th class="head"><p>EPICS record type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Bit Depth of image</p></td>
<td><p>OperatingMode, OperatingMode_RBV</p></td>
<td><p>mbbo, mbbi</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="unsupported-standard-driver-parameters">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">Unsupported standard driver parameters</a><a class="headerlink" href="#unsupported-standard-driver-parameters" title="Link to this heading"></a></h2>
<p>All standard parameters not mentioned in this document are not supported.</p>
</section>
<section id="configuration">
<h2><a class="toc-backref" href="#id11" role="doc-backlink">Configuration</a><a class="headerlink" href="#configuration" title="Link to this heading"></a></h2>
<p>The Lambda driver is created with the LambdaConfig command,
either from C/C++ or from the EPICS IOC shell.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">int</span> <span class="n">LambdaConfig</span><span class="p">(</span><span class="n">const</span> <span class="n">char</span> <span class="o">*</span><span class="n">portName</span><span class="p">,</span> <span class="n">const</span> <span class="n">char</span> <span class="o">*</span><span class="n">config</span><span class="p">,</span> <span class="nb">int</span> <span class="n">modules</span><span class="p">)</span>
</pre></div>
</div>
<p>For details on the meaning of the parameters to this function refer to
the detailed documentation on the LambdaConfig function in the
<a class="reference external" href="https://areadetector.github.io/master/areaDetectorDoxygenHTML/ADLambda.html">ADLambda</a> and in the documentation for the
constructor for the <a class="reference external" href="https://areadetector.github.io/master/areaDetectorDoxygenHTML/classADLambda.html">ADLambda class</a></p>
<p>There an example IOC boot directory and startup script provided with
areaDetector.</p>
</section>
<section id="medm-screens">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">medm screens</a><a class="headerlink" href="#medm-screens" title="Link to this heading"></a></h2>
<p>The following shows the medm screens that are used to control the Lambda
detector. Note that the general purpose screen ADBase.adl can be used,
but it exposes a few PVs that are not applicable to the Lambda,
and lacks many PVs that are important for the Lambda.</p>
<p>LambdaBase.adl is the screen used to control the Lambda detector.</p>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Mark Rivers.
      <span class="lastupdated">Last updated on 2023-November-25.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>