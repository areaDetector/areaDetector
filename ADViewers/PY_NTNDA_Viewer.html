<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PY_NTNDA_Viewer &mdash; areaDetector Support</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme_overrides.css?v=254ed751" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Acknowledgements and licenses" href="../acknowledgements.html" />
    <link rel="prev" title="ImageJ Controller (EPICS_AD_Controller.java)" href="ImageJ_EPICS_AD_Controller.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            areaDetector
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../readme.html">Readme</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../user_guide.html">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../ADCore/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ADCore/arch.html">Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ADCore/asynPortDriver.html">asynPortDriver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ADCore/NDArray.html">NDArray</a></li>
<li class="toctree-l2"><a class="reference internal" href="../detector_drivers.html">Detector Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ADCore/plugins.html">areaDetector Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../additional_plugins.html">Additional plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ADCore/medm.html">MEDM screens</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="ad_viewers.html">areaDetector Viewers</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="IDL_Viewer.html">IDL Viewer</a></li>
<li class="toctree-l3"><a class="reference internal" href="ImageJ_EPICS_AD_Viewer.html">ImageJ Channel Access Viewer (EPICS_AD_Viewer.java)</a></li>
<li class="toctree-l3"><a class="reference internal" href="ImageJ_EPICS_NTNDA_Viewer.html">ImageJ pvAccess Viewer (EPICS_NTNDA_Viewer.java)</a></li>
<li class="toctree-l3"><a class="reference internal" href="ImageJ_EPICS_AD_Controller.html">ImageJ Controller (EPICS_AD_Controller.java)</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">PY_NTNDA_Viewer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#required-python-modules">Required Python Modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#user-interface">User Interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="#brief-description">Brief description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#starting-the-example">Starting the example</a></li>
<li class="toctree-l4"><a class="reference internal" href="#suggested-simdetector-setup">Suggested simDetector setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="#image-zoom">Image Zoom</a></li>
<li class="toctree-l4"><a class="reference internal" href="#color-table">Color Table</a></li>
<li class="toctree-l4"><a class="reference internal" href="#plot3d">plot3d</a></li>
<li class="toctree-l4"><a class="reference internal" href="#some-code-details">Some Code Details</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ad_viewers.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="ad_viewers.html#imagej-viewers">ImageJ Viewers</a></li>
<li class="toctree-l3"><a class="reference internal" href="ad_viewers.html#imagej-controller-epics-ad-controller-java">ImageJ Controller (EPICS_AD_Controller.java)</a></li>
<li class="toctree-l3"><a class="reference internal" href="ad_viewers.html#imagej-gaussian-profiler-gaussianprofiler-java">ImageJ Gaussian Profiler (GaussianProfiler.java)</a></li>
<li class="toctree-l3"><a class="reference internal" href="ad_viewers.html#python-viewer">Python Viewer</a></li>
<li class="toctree-l3"><a class="reference internal" href="ad_viewers.html#idl-viewer">IDL Viewer</a></li>
<li class="toctree-l3"><a class="reference internal" href="ad_viewers.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l3"><a class="reference internal" href="ad_viewers.html#feature-comparison">Feature comparison</a></li>
<li class="toctree-l3"><a class="reference internal" href="ad_viewers.html#performance-comparison">Performance comparison</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../acknowledgements.html">Acknowledgements and licenses</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../install_guide.html">Install Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">Top-level Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ADCore_release.html">ADCore Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ADSupport_release.html">ADSupport Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doxygen.html">Source Code Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../detectors.html">Supported Detectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../legacy_versions.html">Legacy Versions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">areaDetector</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../user_guide.html">areaDetector Users Guide</a></li>
          <li class="breadcrumb-item"><a href="ad_viewers.html">areaDetector Viewers</a></li>
      <li class="breadcrumb-item active">PY_NTNDA_Viewer</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/ADViewers/PY_NTNDA_Viewer.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="py-ntnda-viewer">
<h1><a class="toc-backref" href="#id1" role="doc-backlink">PY_NTNDA_Viewer</a><a class="headerlink" href="#py-ntnda-viewer" title="Link to this heading"></a></h1>
<p>Author: Marty Kraimer</p>
<p>Date: 2020.11.17</p>
<nav class="contents" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#py-ntnda-viewer" id="id1">PY_NTNDA_Viewer</a></p>
<ul>
<li><p><a class="reference internal" href="#overview" id="id2">Overview</a></p></li>
<li><p><a class="reference internal" href="#required-python-modules" id="id3">Required Python Modules</a></p></li>
<li><p><a class="reference internal" href="#user-interface" id="id4">User Interface</a></p>
<ul>
<li><p><a class="reference internal" href="#first-row-of-control-window" id="id5">First row of control window</a></p></li>
<li><p><a class="reference internal" href="#second-row-of-control-window" id="id6">Second row of control window</a></p></li>
<li><p><a class="reference internal" href="#third-row-of-control-window" id="id7">Third row of control window</a></p></li>
<li><p><a class="reference internal" href="#fourth-row-of-control-window" id="id8">Fourth row of control window</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#brief-description" id="id9">Brief description</a></p></li>
<li><p><a class="reference internal" href="#starting-the-example" id="id10">Starting the example</a></p>
<ul>
<li><p><a class="reference internal" href="#starting-simdetector" id="id11">Starting simDetector</a></p></li>
<li><p><a class="reference internal" href="#start-a-display-manager" id="id12">Start a display manager</a></p></li>
<li><p><a class="reference internal" href="#start-p4p-ntnda-viewer-or-pvapy-ntnda-viewer" id="id13">start P4P_NTNDA_Viewer or PVAPY_NTNDA_Viewer</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#suggested-simdetector-setup" id="id14">Suggested simDetector setup</a></p>
<ul>
<li><p><a class="reference internal" href="#main-window" id="id15">Main window</a></p></li>
<li><p><a class="reference internal" href="#commonplugins" id="id16">commonPlugins</a></p></li>
<li><p><a class="reference internal" href="#ndcodec" id="id17">NDCodec</a></p></li>
<li><p><a class="reference internal" href="#simulation-setup" id="id18">Simulation Setup</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#image-zoom" id="id19">Image Zoom</a></p></li>
<li><p><a class="reference internal" href="#color-table" id="id20">Color Table</a></p></li>
<li><p><a class="reference internal" href="#plot3d" id="id21">plot3d</a></p></li>
<li><p><a class="reference internal" href="#some-code-details" id="id22">Some Code Details</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="overview">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Overview</a><a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>PY_NTNDA_Viewer is Python code that is similar to the Java EPICS_NTNDA_Viewer that comes with areaDetector.</p>
<p>It is available in <a class="reference external" href="https://github.com/areaDetector/ADViewers">ADViewers</a></p>
<p>It is a viewer for images obtained from an areaDetector pvAccess channel that provides an NTNDArray.</p>
<p>There are currently 2 versions:</p>
<ol class="arabic simple">
<li><p>P4P_NTNDA_Viewer.py This uses p4p.</p></li>
<li><p>PVAPY_NTNDA_Viewer.py This uses pvaPy.</p></li>
</ol>
<p>Both are supported on Windows, Mac OSX, and Linux.</p>
</section>
<section id="required-python-modules">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Required Python Modules</a><a class="headerlink" href="#required-python-modules" title="Link to this heading"></a></h2>
<p>You must have python3 and pip installed.</p>
<p>The other python modules can be installed via pip install …</p>
<p>For example issue the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">numpy</span>
</pre></div>
</div>
<p>The following is a list of modules required by PY_NTNDA_Viewer</p>
<ul class="simple">
<li><p>numpy</p></li>
<li><p>matplotlib</p></li>
<li><p>PyQt5</p></li>
<li><p>PyQt5-sip</p></li>
<li><p>QtPy</p></li>
<li><p>p4p and/or pvapy</p></li>
</ul>
<p>Mac users will need to install pvapy via conda:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">c</span> <span class="n">epics</span> <span class="n">pvapy</span>
<span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
</section>
<section id="user-interface">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">User Interface</a><a class="headerlink" href="#user-interface" title="Link to this heading"></a></h2>
<p>When either version is started the following control window appears:</p>
<img alt="../_images/PY_NTNDA_Viewer.png" src="../_images/PY_NTNDA_Viewer.png" />
<p>When start is pressed the following appears:</p>
<img alt="../_images/PY_NTNDA_image.png" src="../_images/PY_NTNDA_image.png" />
<section id="first-row-of-control-window">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">First row of control window</a><a class="headerlink" href="#first-row-of-control-window" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>start</strong> Clicking this button starts communication with the server.</p></li>
<li><p><strong>stop</strong> Clicking this button stops communication with the server.</p></li>
<li><p><strong>showColorTable</strong> Clicking this brings up the ColorTable window. See below for details.</p></li>
<li><p><strong>plot3d</strong> Clicking on this brings up a 3d image window. See below for examples.</p></li>
<li><p><strong>channelName</strong> This is the name of the channel that provides the NTNDArray. When in stopped mode a new channel name can be specified.</p></li>
</ul>
</section>
<section id="second-row-of-control-window">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">Second row of control window</a><a class="headerlink" href="#second-row-of-control-window" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>imageRate</strong> This shows the number of images/second that are being displayed. Note that this is normally less than the number of images the server is producing.</p></li>
<li><p><strong>imageSize</strong> This specifies the maximum of width and height for the image display.</p></li>
<li><p><strong>compressRatio</strong> If image is compressed, this shows the compression ratio.</p></li>
<li><p><strong>codec</strong> The compression type. <strong>none</strong> means no compression.</p></li>
<li><p><strong>clear</strong> Clear the following status window.</p></li>
</ul>
</section>
<section id="third-row-of-control-window">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Third row of control window</a><a class="headerlink" href="#third-row-of-control-window" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>autoScale</strong> image pixel values are scaled.</p></li>
<li><p><strong>manualScale</strong> image pixel values are scaled via manualMin and manualMax</p></li>
<li><p><strong>manualMin</strong> minimum value for manual scaling.</p></li>
<li><p><strong>manualMax</strong> maximuum value for manual scaling.</p></li>
<li><p><strong>resetZoom</strong> revert to full image.</p></li>
<li><p><strong>zoomIn</strong> zoom into the current image.</p></li>
<li><p><strong>x1,…,x16</strong> scale factor for zoomIn.</p></li>
<li><p><strong>zoomBack</strong> revent to previous zoom.</p></li>
</ul>
</section>
<section id="fourth-row-of-control-window">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Fourth row of control window</a><a class="headerlink" href="#fourth-row-of-control-window" title="Link to this heading"></a></h3>
<p>This provides information about current image.</p>
<ul class="simple">
<li><p><strong>nx</strong> This is image width</p></li>
<li><p><strong>ny</strong> This is image height</p></li>
<li><p><strong>nz</strong> (1,3) if (mono,color) image</p></li>
<li><p><strong>dtype</strong> pixel data type</p></li>
</ul>
<p>The following update as the mouse is moved over the image window</p>
<ul class="simple">
<li><p><strong>x</strong></p></li>
<li><p><strong>y</strong></p></li>
<li><p><strong>value</strong></p></li>
</ul>
</section>
</section>
<section id="brief-description">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">Brief description</a><a class="headerlink" href="#brief-description" title="Link to this heading"></a></h2>
<p>As mentioned above PY_NTNDA_Viewer is a viewer for images obtained from an areaDetector pvAccess channel that provides an NTNDArray.</p>
<p>It accesss the following fields:</p>
<ul class="simple">
<li><p><strong>value</strong> The image data.  The data is a 2d or 3d array of pixels. The pixel data type can be: 1) a signed or unsigned integer or 2) a single or double float.</p></li>
<li><p><strong>codec</strong> If the data is compressed, the compression type.</p></li>
<li><p><strong>dimension</strong> The x,y,z dimensions.</p></li>
</ul>
<p>When started, PY_NTNDA_Viewer creates a channel monitor.</p>
<p>For each monitor event the following happens:</p>
<ul class="simple">
<li><p>If the data is compressed, it is decompressed</p></li>
<li><p>An image with datatype uint8 is created.</p></li>
<li><p>The image is displayed.</p></li>
</ul>
<p>Once an image is displayed it can be <strong>zoomed</strong>, i.e. You can zooom into a subimage.</p>
<p>This can be done in two ways:</p>
<ul class="simple">
<li><p>Via the mouse. Press the mouse somewhere in the image, drag the mouse to another position, release the mouse.</p></li>
<li><p>Via the <strong>zoomIn</strong> button</p></li>
</ul>
</section>
<section id="starting-the-example">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">Starting the example</a><a class="headerlink" href="#starting-the-example" title="Link to this heading"></a></h2>
<section id="starting-simdetector">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">Starting simDetector</a><a class="headerlink" href="#starting-simdetector" title="Link to this heading"></a></h3>
<p>Start an IOC running the simDetector. For example I start it as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mrk</span><span class="o">&gt;</span> <span class="n">pwd</span>
<span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">epics7</span><span class="o">/</span><span class="n">areaDetector</span><span class="o">/</span><span class="n">ADSimDetector</span><span class="o">/</span><span class="n">iocs</span><span class="o">/</span><span class="n">simDetectorIOC</span><span class="o">/</span><span class="n">iocBoot</span><span class="o">/</span><span class="n">iocSimDetector</span>
<span class="n">mrk</span><span class="o">&gt;</span> <span class="o">./</span><span class="n">start_epics</span>
</pre></div>
</div>
</section>
<section id="start-a-display-manager">
<h3><a class="toc-backref" href="#id12" role="doc-backlink">Start a display manager</a><a class="headerlink" href="#start-a-display-manager" title="Link to this heading"></a></h3>
<p>At least the following choices are available: medm, edm, pydm, and css. For any choice the display file, with name simDetector, to load is located in areaDetector/ADSimDetector/simDetectorApp/op</p>
<p>For example to use medm I have the files setEnv and startSimDetector, which are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>export PATH=$PATH:/home/epics7/extensions/bin/${EPICS_HOST_ARCH}
export EPICS_DISPLAY_PATH=/home/epics7/areaDetector/ADCore/ADApp/op/adl
export EPICS_DISPLAY_PATH=${EPICS_DISPLAY_PATH}:/home/epics7/areaDetector/pvaDriver/pvaDriverApp/op/adl
export EPICS_DISPLAY_PATH=${EPICS_DISPLAY_PATH}:/home/epics7/areaDetector/ADSimDetector/simDetectorApp/op/adl
export EPICS_CA_MAX_ARRAY_BYTES=40000000
</pre></div>
</div>
<p>and:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="o">./</span><span class="n">setEnv</span>
<span class="n">medm</span>  <span class="o">-</span><span class="n">x</span> <span class="o">-</span><span class="n">macro</span> <span class="s2">&quot;P=13SIM1:,R=cam1:&quot;</span> <span class="n">simDetector</span><span class="o">.</span><span class="n">adl</span>
</pre></div>
</div>
<p>then I just enter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">startSimDetector</span>
</pre></div>
</div>
</section>
<section id="start-p4p-ntnda-viewer-or-pvapy-ntnda-viewer">
<h3><a class="toc-backref" href="#id13" role="doc-backlink">start P4P_NTNDA_Viewer or PVAPY_NTNDA_Viewer</a><a class="headerlink" href="#start-p4p-ntnda-viewer-or-pvapy-ntnda-viewer" title="Link to this heading"></a></h3>
<p>The channelName can be specified in three ways:</p>
<ol class="arabic simple">
<li><p>Via environment variable EPICS_NTNDA_VIEWER_CHANNELNAME.</p></li>
<li><p>As a command line argument.</p></li>
<li><p>By entering it via the viewer when in stop mode.</p></li>
</ol>
<p>In order to use the codec support from <strong>areaDetector</strong> you must have a path to</p>
<p><strong>areaDetector/ADSupport/lib…</strong> defined.</p>
<p>The details differ between Windows and Linux or MacOSX.</p>
<p>An example is <strong>exampleStartP4P</strong>, which uses <strong>p4p</strong> for communication with the simDetector:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/home/epics7/areaDetector/ADSupport/lib/linux-x86_64
export EPICS_NTNDA_VIEWER_CHANNELNAME=&quot;13SIM1:Pva1:Image&quot;
python P4P_NTNDA_Viewer.py
</pre></div>
</div>
<p>I start it via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mrk</span><span class="o">&gt;</span> <span class="n">pwd</span>
<span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">epics7</span><span class="o">/</span><span class="n">modules</span><span class="o">/</span><span class="n">PY_NTNDA_Viewer</span>
<span class="n">mrk</span><span class="o">&gt;</span> <span class="o">./</span><span class="n">exampleStartP4P</span>
</pre></div>
</div>
<p>You will see errors if You have not installed all the python packages required. If it shows no errors click connect and start.</p>
<p>Then:</p>
<ol class="arabic simple">
<li><p>Run whatever opi tool you use to control the simDetector. Details provided in next section</p></li>
<li><p>Click start.</p></li>
</ol>
<p>You should see images being displayed.</p>
<p><strong>exampleStartPVAPY</strong> starts <strong>PVAPY_NTNDA_Viewer.py</strong>, which uses <strong>pvapy</strong> for communication with the simDetector.</p>
</section>
</section>
<section id="suggested-simdetector-setup">
<h2><a class="toc-backref" href="#id14" role="doc-backlink">Suggested simDetector setup</a><a class="headerlink" href="#suggested-simdetector-setup" title="Link to this heading"></a></h2>
<section id="main-window">
<h3><a class="toc-backref" href="#id15" role="doc-backlink">Main window</a><a class="headerlink" href="#main-window" title="Link to this heading"></a></h3>
<p>The following is the main window for the simDetector:</p>
<img alt="../_images/PY_NTNDA_simDetector.png" src="../_images/PY_NTNDA_simDetector.png" />
<p>The following are the controls of interest:</p>
<ol class="arabic simple">
<li><p><strong>All Plugins</strong> This brings up the commonPlugin described below.</p></li>
<li><p><strong>Simulation setup</strong> This brings up simDetectorSetup described below.</p></li>
<li><p><strong>Image mode</strong> Usually set to continuous.</p></li>
<li><p><strong>start</strong> and <strong>stop</strong> start and stop acquisition</p></li>
<li><p><strong>Data Type</strong> All data types work. For other than uint8 you may also want to adjust gain.</p></li>
<li><p><strong>ColorMode</strong> All work</p></li>
<li><p><strong>Gain</strong> Suggestions are 1 for simulation mode linearRamp and 255 for simulation mode peaks.</p></li>
</ol>
</section>
<section id="commonplugins">
<h3><a class="toc-backref" href="#id16" role="doc-backlink">commonPlugins</a><a class="headerlink" href="#commonplugins" title="Link to this heading"></a></h3>
<img alt="../_images/PY_NTNDA_commonPlugins.png" src="../_images/PY_NTNDA_commonPlugins.png" />
<p>The following are the ones of interest.</p>
<ol class="arabic simple">
<li><p><strong>PVA1</strong> Must be enabled. Set Port to <strong>CODEC1</strong> if you want to use codecs</p></li>
<li><p><strong>CODEC1</strong> If you want to use codecs click on the More botton on right side of window.</p></li>
</ol>
</section>
<section id="ndcodec">
<h3><a class="toc-backref" href="#id17" role="doc-backlink">NDCodec</a><a class="headerlink" href="#ndcodec" title="Link to this heading"></a></h3>
<img alt="../_images/PY_NTNDA_NDCodec.png" src="../_images/PY_NTNDA_NDCodec.png" />
<p>This is the controller for <strong>CODEC1</strong>.</p>
<p>The controls of interest are:</p>
<ol class="arabic simple">
<li><p><strong>Enable</strong> It must be set to enable.</p></li>
<li><p><strong>Compressor</strong> Select the codec support you want.</p></li>
<li><p><strong>Blosc Compressor</strong> If Compressor is <strong>Blosc</strong> this selects type.</p></li>
</ol>
</section>
<section id="simulation-setup">
<h3><a class="toc-backref" href="#id18" role="doc-backlink">Simulation Setup</a><a class="headerlink" href="#simulation-setup" title="Link to this heading"></a></h3>
<img alt="../_images/PY_NTNDA_simDetectorSetup.png" src="../_images/PY_NTNDA_simDetectorSetup.png" />
<p>This show setup options.</p>
<p>The options shown are the ones for the examples shown in this document.</p>
</section>
</section>
<section id="image-zoom">
<h2><a class="toc-backref" href="#id19" role="doc-backlink">Image Zoom</a><a class="headerlink" href="#image-zoom" title="Link to this heading"></a></h2>
<p>The following are the ways to change the part of the image that is displayed.</p>
<ol class="arabic simple">
<li><p><strong>mouse</strong> Use the mouse to select a subimage of the current image. That is press, drag, and release.</p></li>
<li><p><strong>zoomIn</strong> Clicking zooms in. x1, …, x16 sets zoom amount.</p></li>
<li><p><strong>zoomBack</strong> Clicking reverts to previous zoom image</p></li>
<li><p><strong>resetZoom</strong> Reverts to full image.</p></li>
</ol>
</section>
<section id="color-table">
<h2><a class="toc-backref" href="#id20" role="doc-backlink">Color Table</a><a class="headerlink" href="#color-table" title="Link to this heading"></a></h2>
<img alt="../_images/PY_NTNDA_ColorTable.png" src="../_images/PY_NTNDA_ColorTable.png" />
<p>This provides psudo color maps for mono images.</p>
<p>Note that when peak mode is being used julia color comes close to showing the actual edges
of the peaks.</p>
<p>For example if julia is selected and the image is zoomed, I see:</p>
<img alt="../_images/PY_NTNDA_zoomedImage.png" src="../_images/PY_NTNDA_zoomedImage.png" />
<p>Then issue mouse clicks in the image and look at the new widow that appears.</p>
<p>Moving the mouse in the new window shows the pixel location and value.</p>
</section>
<section id="plot3d">
<h2><a class="toc-backref" href="#id21" role="doc-backlink">plot3d</a><a class="headerlink" href="#plot3d" title="Link to this heading"></a></h2>
<p>If you have zoomed to the following:</p>
<img alt="../_images/PY_NTNDA_image1.png" src="../_images/PY_NTNDA_image1.png" />
<p>And then click plot3d the following appears:</p>
<img alt="../_images/PY_NTNDA_plot3d.png" src="../_images/PY_NTNDA_plot3d.png" />
<p>Other views appear by using the mouse to grab the bottom corner of the axes and moving the mouse.</p>
<p>For example</p>
<img alt="../_images/PY_NTNDA_plot3d1.png" src="../_images/PY_NTNDA_plot3d1.png" />
<p>Now change medm color mode to RGB1 and then zoom to :</p>
<img alt="../_images/PY_NTNDA_image3.png" src="../_images/PY_NTNDA_image3.png" />
<p>And then click plot3d the following appears:</p>
<img alt="../_images/PY_NTNDA_plot3d2.png" src="../_images/PY_NTNDA_plot3d2.png" />
<p>Other views appear by using the mouse to grab the bottom corner of the axes and moving the mouse.</p>
<p>For example</p>
<img alt="../_images/PY_NTNDA_plot3d3.png" src="../_images/PY_NTNDA_plot3d3.png" />
</section>
<section id="some-code-details">
<h2><a class="toc-backref" href="#id22" role="doc-backlink">Some Code Details</a><a class="headerlink" href="#some-code-details" title="Link to this heading"></a></h2>
<p><strong>NtNDA_Viewer.py</strong> creates the control window.</p>
<p>It uses the following python classes:</p>
<ul class="simple">
<li><p><strong>ChannelToImageAD</strong> Converts the data from the NTNDAArray to an image that can be passed to the next class.</p></li>
<li><p><strong>NumpyImage</strong> Displays an Image via QImage. It also has class <strong>FollowMouse</strong>.</p></li>
<li><p><strong>CodecAD</strong> Decompresses compressed data from the NTNDAArray.</p></li>
<li><p><strong>ColorTable</strong> Provides psuedo color tables for monochrome images from NTNDArray</p></li>
</ul>
<p>Each provides Python documentation.</p>
<p>To view the documentation do the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mrk</span><span class="o">&gt;</span> <span class="n">pwd</span>
<span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">epics7</span><span class="o">/</span><span class="n">testPython</span><span class="o">/</span><span class="n">PY_NTNDA_Viewer</span>
<span class="n">mrk</span><span class="o">&gt;</span> <span class="n">ipython</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="kn">from</span> <span class="nn">numpyImage</span> <span class="kn">import</span> <span class="n">NumpyImage</span><span class="p">,</span> <span class="n">FollowMouse</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="kn">from</span> <span class="nn">codecAD</span> <span class="kn">import</span> <span class="n">CodecAD</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="kn">from</span> <span class="nn">channelToImageAD</span> <span class="kn">import</span> <span class="n">ChannelToImageAD</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="kn">from</span> <span class="nn">colorTable</span> <span class="kn">import</span> <span class="n">ColorTable</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="n">help</span><span class="p">(</span><span class="n">NumpyImage</span><span class="p">)</span>
<span class="o">...</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ImageJ_EPICS_AD_Controller.html" class="btn btn-neutral float-left" title="ImageJ Controller (EPICS_AD_Controller.java)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../acknowledgements.html" class="btn btn-neutral float-right" title="Acknowledgements and licenses" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Mark Rivers.
      <span class="lastupdated">Last updated on 2024-April-14.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>