<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>areaDetector: /home/runner/work/areaDetector/areaDetector/ADCore/ADApp/ADSrc/NDArrayPool.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">areaDetector
   &#160;<span id="projectnumber">3-12-1</span>
   </div>
   <div id="projectbrief">EPICS areaDetector framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_43e0a1f539e00dcfa1a6bc4d4fee4fc2.html">home</a></li><li class="navelem"><a class="el" href="dir_1036706e55c22cab35bc1c58ee689f1d.html">runner</a></li><li class="navelem"><a class="el" href="dir_629f8151d55d307162ff2d619fb1783d.html">work</a></li><li class="navelem"><a class="el" href="dir_eed808bec8b305d58e6db4c904f249c6.html">areaDetector</a></li><li class="navelem"><a class="el" href="dir_64cdf711c4b4aaabab58afd8cbe7e4a1.html">areaDetector</a></li><li class="navelem"><a class="el" href="dir_2d2a428b55aba847c36f9feeab976579.html">ADCore</a></li><li class="navelem"><a class="el" href="dir_0685f44ca5006c19311feb74d651e709.html">ADApp</a></li><li class="navelem"><a class="el" href="dir_e3b08e7d4d62856ef133b5825ccd1f8f.html">ADSrc</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">NDArrayPool.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;dbDefs.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;epicsMutex.h&gt;</code><br />
<code>#include &lt;epicsThread.h&gt;</code><br />
<code>#include &lt;epicsTime.h&gt;</code><br />
<code>#include &lt;ellLib.h&gt;</code><br />
<code>#include &lt;cantProceed.h&gt;</code><br />
<code>#include &lt;asynPortDriver.h&gt;</code><br />
<code>#include &lt;epicsExport.h&gt;</code><br />
<code>#include &quot;<a class="el" href="asyn_n_d_array_driver_8h_source.html">asynNDArrayDriver.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_n_d_array_8h_source.html">NDArray.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a7a7dcf7af9e163268830474c0997b652"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_n_d_array_pool_8cpp.html#a7a7dcf7af9e163268830474c0997b652">THRESHOLD_SIZE_RATIO</a>&#160;&#160;&#160;1.5</td></tr>
<tr class="memdesc:a7a7dcf7af9e163268830474c0997b652"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="_n_d_array_pool_8cpp.html">NDArrayPool.cpp</a>.  <a href="_n_d_array_pool_8cpp.html#a7a7dcf7af9e163268830474c0997b652">More...</a><br /></td></tr>
<tr class="separator:a7a7dcf7af9e163268830474c0997b652"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa268383536f7398e9557062f819617c2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_n_d_array_pool_8cpp.html#aa268383536f7398e9557062f819617c2">epicsExportAddress</a> (int, <a class="el" href="_n_d_array_pool_8cpp.html#ae31a4d65bb70b64fc8abccd14b66e55b">eraseNDAttributes</a>)</td></tr>
<tr class="separator:aa268383536f7398e9557062f819617c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6609a65a84952f63c501f8b9162c0c8b"><td class="memTemplParams" colspan="2">template&lt;typename dataTypeIn , typename dataTypeOut &gt; </td></tr>
<tr class="memitem:a6609a65a84952f63c501f8b9162c0c8b"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="_n_d_array_pool_8cpp.html#a6609a65a84952f63c501f8b9162c0c8b">convertType</a> (<a class="el" href="class_n_d_array.html">NDArray</a> *pIn, <a class="el" href="class_n_d_array.html">NDArray</a> *pOut)</td></tr>
<tr class="separator:a6609a65a84952f63c501f8b9162c0c8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70548ad2cde5c17ee2797b5af10930df"><td class="memTemplParams" colspan="2">template&lt;typename dataTypeOut &gt; </td></tr>
<tr class="memitem:a70548ad2cde5c17ee2797b5af10930df"><td class="memTemplItemLeft" align="right" valign="top">int&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="_n_d_array_pool_8cpp.html#a70548ad2cde5c17ee2797b5af10930df">convertTypeSwitch</a> (<a class="el" href="class_n_d_array.html">NDArray</a> *pIn, <a class="el" href="class_n_d_array.html">NDArray</a> *pOut)</td></tr>
<tr class="separator:a70548ad2cde5c17ee2797b5af10930df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a795182c7be4c74f86ff1a4fe1cd99a9d"><td class="memTemplParams" colspan="2">template&lt;typename dataTypeIn , typename dataTypeOut &gt; </td></tr>
<tr class="memitem:a795182c7be4c74f86ff1a4fe1cd99a9d"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="_n_d_array_pool_8cpp.html#a795182c7be4c74f86ff1a4fe1cd99a9d">convertDim</a> (<a class="el" href="class_n_d_array.html">NDArray</a> *pIn, <a class="el" href="class_n_d_array.html">NDArray</a> *pOut, void *pDataIn, void *pDataOut, int dim)</td></tr>
<tr class="separator:a795182c7be4c74f86ff1a4fe1cd99a9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acffdd1a3b267c9c8d2a587760600eb06"><td class="memTemplParams" colspan="2">template&lt;typename dataTypeOut &gt; </td></tr>
<tr class="memitem:acffdd1a3b267c9c8d2a587760600eb06"><td class="memTemplItemLeft" align="right" valign="top">int&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="_n_d_array_pool_8cpp.html#acffdd1a3b267c9c8d2a587760600eb06">convertDimensionSwitch</a> (<a class="el" href="class_n_d_array.html">NDArray</a> *pIn, <a class="el" href="class_n_d_array.html">NDArray</a> *pOut, void *pDataIn, void *pDataOut, int dim)</td></tr>
<tr class="separator:acffdd1a3b267c9c8d2a587760600eb06"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ac2a588e22b7e9bdca023c969a2cb7a39"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_n_d_array_8h.html#af2603c40a08c8ece79213fe4e2b0301f">MallocFunc_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_n_d_array_pool_8cpp.html#ac2a588e22b7e9bdca023c969a2cb7a39">defaultFrameMalloc</a> = malloc</td></tr>
<tr class="separator:ac2a588e22b7e9bdca023c969a2cb7a39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5265822d2e260e3cc0d04bb4669e952"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_n_d_array_8h.html#aa2fc1a061fb319b27099bf13ef3799be">FreeFunc_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_n_d_array_pool_8cpp.html#ae5265822d2e260e3cc0d04bb4669e952">defaultFrameFree</a> = free</td></tr>
<tr class="separator:ae5265822d2e260e3cc0d04bb4669e952"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae31a4d65bb70b64fc8abccd14b66e55b"><td class="memItemLeft" align="right" valign="top">volatile int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_n_d_array_pool_8cpp.html#ae31a4d65bb70b64fc8abccd14b66e55b">eraseNDAttributes</a> =0</td></tr>
<tr class="memdesc:ae31a4d65bb70b64fc8abccd14b66e55b"><td class="mdescLeft">&#160;</td><td class="mdescRight">eraseNDAttributes is a global flag the controls whether NDArray::clearAttributes() is called each time a new array is allocated with NDArrayPool-&gt;alloc().  <a href="_n_d_array_pool_8cpp.html#ae31a4d65bb70b64fc8abccd14b66e55b">More...</a><br /></td></tr>
<tr class="separator:ae31a4d65bb70b64fc8abccd14b66e55b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a7a7dcf7af9e163268830474c0997b652"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a7dcf7af9e163268830474c0997b652">&#9670;&nbsp;</a></span>THRESHOLD_SIZE_RATIO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define THRESHOLD_SIZE_RATIO&#160;&#160;&#160;1.5</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="_n_d_array_pool_8cpp.html">NDArrayPool.cpp</a>. </p>
<p>Mark Rivers University of Chicago October 18, 2013 </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a795182c7be4c74f86ff1a4fe1cd99a9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a795182c7be4c74f86ff1a4fe1cd99a9d">&#9670;&nbsp;</a></span>convertDim()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename dataTypeIn , typename dataTypeOut &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void convertDim </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_n_d_array.html">NDArray</a> *&#160;</td>
          <td class="paramname"><em>pIn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_n_d_array.html">NDArray</a> *&#160;</td>
          <td class="paramname"><em>pOut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pDataIn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pDataOut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dim</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="acffdd1a3b267c9c8d2a587760600eb06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acffdd1a3b267c9c8d2a587760600eb06">&#9670;&nbsp;</a></span>convertDimensionSwitch()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename dataTypeOut &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">int convertDimensionSwitch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_n_d_array.html">NDArray</a> *&#160;</td>
          <td class="paramname"><em>pIn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_n_d_array.html">NDArray</a> *&#160;</td>
          <td class="paramname"><em>pOut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pDataIn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pDataOut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dim</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a6609a65a84952f63c501f8b9162c0c8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6609a65a84952f63c501f8b9162c0c8b">&#9670;&nbsp;</a></span>convertType()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename dataTypeIn , typename dataTypeOut &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void convertType </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_n_d_array.html">NDArray</a> *&#160;</td>
          <td class="paramname"><em>pIn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_n_d_array.html">NDArray</a> *&#160;</td>
          <td class="paramname"><em>pOut</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a70548ad2cde5c17ee2797b5af10930df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70548ad2cde5c17ee2797b5af10930df">&#9670;&nbsp;</a></span>convertTypeSwitch()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename dataTypeOut &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">int convertTypeSwitch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_n_d_array.html">NDArray</a> *&#160;</td>
          <td class="paramname"><em>pIn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_n_d_array.html">NDArray</a> *&#160;</td>
          <td class="paramname"><em>pOut</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa268383536f7398e9557062f819617c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa268383536f7398e9557062f819617c2">&#9670;&nbsp;</a></span>epicsExportAddress()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">epicsExportAddress </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_n_d_array_pool_8cpp.html#ae31a4d65bb70b64fc8abccd14b66e55b">eraseNDAttributes</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ae5265822d2e260e3cc0d04bb4669e952"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5265822d2e260e3cc0d04bb4669e952">&#9670;&nbsp;</a></span>defaultFrameFree</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_n_d_array_8h.html#aa2fc1a061fb319b27099bf13ef3799be">FreeFunc_t</a> defaultFrameFree = free</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac2a588e22b7e9bdca023c969a2cb7a39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2a588e22b7e9bdca023c969a2cb7a39">&#9670;&nbsp;</a></span>defaultFrameMalloc</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_n_d_array_8h.html#af2603c40a08c8ece79213fe4e2b0301f">MallocFunc_t</a> defaultFrameMalloc = malloc</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae31a4d65bb70b64fc8abccd14b66e55b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae31a4d65bb70b64fc8abccd14b66e55b">&#9670;&nbsp;</a></span>eraseNDAttributes</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile int eraseNDAttributes =0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>eraseNDAttributes is a global flag the controls whether NDArray::clearAttributes() is called each time a new array is allocated with NDArrayPool-&gt;alloc(). </p>
<p>The default value is 0, meaning that clearAttributes() is not called. This mode is efficient because it saves lots of allocation/deallocation, and it is fine when the attributes for a driver are set once and not changed. If driver attributes are deleted however, the allocated arrays will still have the old attributes if this flag is 0. Set this flag to force attributes to be removed each time an <a class="el" href="class_n_d_array.html" title="N-dimensional array class; each array has a set of dimensions, a data type, pointer to data,...">NDArray</a> is allocated. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
