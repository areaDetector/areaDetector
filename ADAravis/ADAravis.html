<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ADAravis &mdash; areaDetector Support</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme_overrides.css?v=254ed751" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="ADCSimDetector" href="../ADCSimDetector/ADCSimDetectorDoc.html" />
    <link rel="prev" title="ADAndor3" href="../ADAndor3/ADAndorDoc.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            areaDetector
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../readme.html">Readme</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../user_guide.html">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../ADCore/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ADCore/arch.html">Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ADCore/asynPortDriver.html">asynPortDriver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ADCore/NDArray.html">NDArray</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../detector_drivers.html">Detector Drivers</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../ADCore/guidelines.html">Guidelines and rules for drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADCore/ADDriver.html">ADDriver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADAndor/andorDoc.html">ADAndor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADAndor3/ADAndorDoc.html">ADAndor3</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">ADAravis</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#adaravis-driver">ADAravis driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ioc-startup-script">IOC startup script</a></li>
<li class="toctree-l4"><a class="reference internal" href="#medm-screens">MEDM screens</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ADCSimDetector/ADCSimDetectorDoc.html">ADCSimDetector</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADDexela/ADDexela.html">ADDexela</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADEiger/eiger.html">ADEiger</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADFastCCD/index.html">ADFastCCD</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADGenICam/ADGenICam.html">ADGenICam</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADLambda/ADLambda.html">ADLambda</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADLightField/ADLightField.html">ADLightField</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADmarCCD/marCCDDoc.html">ADmarCCD</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADmar345/mar345Doc.html">ADmar345</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADPerkinElmer/PerkinElmerDoc.html">ADPerkinElmer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADPICam/PICamDoc.html">ADPICam</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADPilatus/pilatusDoc.html">ADPilatus</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADPixirad/ADPixirad.html">ADPixirad</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADPointGrey/PointGreyDoc.html">ADPointGrey</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADProsilica/ADProsilica.html">ADProsilica</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADPvCam/pvcamDoc.html">ADPvCam</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADPylon/ADPylon.html">ADPylon</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADQImaging/QImagingDoc.html">ADQImaging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADRIXSCam/ADRIXSCam.html">ADRIXSCam</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADSimDetector/simDetector.html">ADSimDetector</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADSpinnaker/ADSpinnaker.html">ADSpinnaker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADVimba/ADVimba.html">ADVimba</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADURL/ADURL.html">ADURL</a></li>
<li class="toctree-l3"><a class="reference internal" href="../NDDriverStdArrays/NDDriverStdArraysDoc.html">NDDriverStdArrays</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pvaDriver/pvaDriver.html">pvaDriver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../specsAnalyser/index.html">specsAnalyser</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ADCore/plugins.html">areaDetector Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../additional_plugins.html">Additional plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ADCore/medm.html">MEDM screens</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ADViewers/ad_viewers.html">areaDetector Viewers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../acknowledgements.html">Acknowledgements and licenses</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../install_guide.html">Install Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">Top-level Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ADCore_release.html">ADCore Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ADSupport_release.html">ADSupport Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doxygen.html">Source Code Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../detectors.html">Supported Detectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../legacy_versions.html">Legacy Versions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">areaDetector</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../user_guide.html">areaDetector Users Guide</a></li>
          <li class="breadcrumb-item"><a href="../detector_drivers.html">Detector Drivers</a></li>
      <li class="breadcrumb-item active">ADAravis</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/ADAravis/ADAravis.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="adaravis">
<h1><a class="toc-backref" href="#id2" role="doc-backlink">ADAravis</a><a class="headerlink" href="#adaravis" title="Link to this heading"></a></h1>
<dl class="field-list simple">
<dt class="field-odd">author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Mark Rivers, University of Chicago</p>
</dd>
</dl>
<nav class="contents" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#adaravis" id="id2">ADAravis</a></p>
<ul>
<li><p><a class="reference internal" href="#overview" id="id3">Overview</a></p></li>
<li><p><a class="reference internal" href="#adaravis-driver" id="id4">ADAravis driver</a></p></li>
<li><p><a class="reference internal" href="#ioc-startup-script" id="id5">IOC startup script</a></p></li>
<li><p><a class="reference internal" href="#medm-screens" id="id6">MEDM screens</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="overview">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Overview</a><a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>This is an <a class="reference internal" href="../index.html"><span class="doc">areaDetector</span></a> driver for <a class="reference external" href="https://www.emva.org/standards-technology/genicam">GenICam</a> cameras using the <a class="reference external" href="https://github.com/AravisProject/aravis">aravis</a> library.</p>
<p><a class="reference external" href="https://www.emva.org/standards-technology/genicam">GenICam</a> is a Generic Interface for Cameras from the European Machine Vision Association (EMVA).</p>
<p>ADAravis is derived from the base class <a class="reference external" href="https://github.com/areaDetector/ADGenICam">ADGenICam</a>, which handles many of the details of
mapping <a class="reference external" href="https://www.emva.org/standards-technology/genicam">GenICam</a> features to EPICS records.</p>
<p><a class="reference external" href="../areaDetectorDoxygenHTML/class_a_d_aravis.html">ADAravis class</a> describes this class in detail.</p>
<p><a class="reference external" href="https://github.com/areaDetector/ADAravis">ADAravis</a> is based heavily on the older <a class="reference external" href="https://github.com/areaDetector/aravisGigE">aravisGigE</a> driver which has been part of areaDetector for many years.
<a class="reference external" href="https://github.com/areaDetector/ADAravis">ADAravis</a> differs from <a class="reference external" href="https://github.com/areaDetector/aravisGigE">aravisGigE</a> by using the <a class="reference external" href="https://github.com/areaDetector/ADGenICam">ADGenICam</a> base class to significantly reduce the amount of code.
Many of the ideas in <a class="reference external" href="https://github.com/areaDetector/ADGenICam">ADGenICam</a> were borrowed from <a class="reference external" href="https://github.com/areaDetector/aravisGigE">aravisGigE</a>.</p>
<p>As it name implies, <a class="reference external" href="https://github.com/areaDetector/ADAravis">ADAravis</a> uses the <a class="reference external" href="https://github.com/AravisProject/aravis">aravis</a> library.  It runs on most Linux systems, and can control any <a class="reference external" href="https://www.emva.org/standards-technology/genicam">GenICam</a> camera.
It cannot be used on Windows because <a class="reference external" href="https://github.com/AravisProject/aravis">aravis</a> because aravis does not support it.</p>
<p>The <a class="reference external" href="https://github.com/AravisProject/aravis">aravis</a> package must be built before building ADAravis.  Instructions for doing this can be found in the
<a class="reference internal" href="../ADGenICam/ADGenICam.html#adgenicam-installing-aravis"><span class="std std-ref">ADGenICam installing aravis</span></a> documentation.</p>
<p>Prior to using ADAravis with a specific camera model, the XML file must be read from the camera using the arv-tool utility,
and the EPICS database file and OPI screens must be generated by running the Python programs in
<a class="reference internal" href="../ADGenICam/ADGenICam.html#adgenicam-python-scripts"><span class="std std-ref">ADGenICam Python scripts</span></a>.</p>
</section>
<section id="adaravis-driver">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">ADAravis driver</a><a class="headerlink" href="#adaravis-driver" title="Link to this heading"></a></h2>
<p>ADGenICam inherits from <a class="reference internal" href="../ADGenICam/ADGenICam.html"><span class="doc">ADGenICam</span></a>.  It adds the following parameters and EPICS records that are
specific to ADAravis.</p>
<table class="table-bordered table-striped table-hover docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>EPICS record names</p></th>
<th class="head"><p>Record types</p></th>
<th class="head"><p>drvInfo string</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ARFramesCompleted</p></td>
<td><p>ai</p></td>
<td><p>ARAVIS_COMPLETED</p></td>
<td><p>Number of frames successfully read</p></td>
</tr>
<tr class="row-odd"><td><p>ARFramesFailures</p></td>
<td><p>ai</p></td>
<td><p>ARAVIS_FAILURES</p></td>
<td><p>Number failures reading frames</p></td>
</tr>
<tr class="row-even"><td><p>ARFrameUnderruns</p></td>
<td><p>ai</p></td>
<td><p>ARAVIS_UNDERRUNS</p></td>
<td><p>Number of frames underruns, which are frames that are too small</p></td>
</tr>
<tr class="row-odd"><td><p>ARMissingPackets</p></td>
<td><p>longin</p></td>
<td><p>ARAVIS_MISSING_PKTS</p></td>
<td><p>Number of missing packets</p></td>
</tr>
<tr class="row-even"><td><p>ARResentPackets</p></td>
<td><p>longin</p></td>
<td><p>ARAVIS_RESENT_PKTS</p></td>
<td><p>Number of resent packets</p></td>
</tr>
<tr class="row-odd"><td><p>ARPacketResendEnable</p></td>
<td><p>mbbo</p></td>
<td><p>ARAVIS_PKT_RESENT</p></td>
<td><p>Enable resending packets. Choices are [0:”Never”, 1:”Always”]</p></td>
</tr>
<tr class="row-even"><td><p>ARPacketTimeout</p></td>
<td><p>longout</p></td>
<td><p>ARAVIS_PKT_TIMEOUT</p></td>
<td><p>Delay in us before packet resend request</p></td>
</tr>
<tr class="row-odd"><td><p>ARFrameRetention</p></td>
<td><p>longout</p></td>
<td><p>ARAVIS_FRAME_RETENTION</p></td>
<td><p>Frame timeout in us after last packet</p></td>
</tr>
<tr class="row-even"><td><p>ARResetCamera</p></td>
<td><p>longout</p></td>
<td><p>ARAVIS_RESET</p></td>
<td><p>Resets the camera</p></td>
</tr>
<tr class="row-odd"><td><p>ARConnectCamera</p></td>
<td><p>longout</p></td>
<td><p>ARAVIS_CONNECTION</p></td>
<td><p>Connects to the camera</p></td>
</tr>
<tr class="row-even"><td><p>ARCheckConnection</p></td>
<td><p>calcout</p></td>
<td><p>N.A.</p></td>
<td><p>Connects to the camera when available</p></td>
</tr>
<tr class="row-odd"><td><p>ARConvertPixelFormat, ARConvertPixelFormat_RBV</p></td>
<td><p>mbbo/mbbi</p></td>
<td><p>ARAVIS_CONVERT_PIXEL_FORMAT</p></td>
<td><p>Controls how Mono12Packed and Mono12p pixel formats are decompressed.
Choices are [0:”Mono16Low”, 1:Mono16High”].
Mono16Low means that the data is not left-shifted by 4 bits, so bits 12-15 are 0.
Mono16High means that the data is left-shifted by 4 bits, so bits 0-3 are 0.</p></td>
</tr>
<tr class="row-even"><td><p>ARShiftDir, ARShiftDir_RBV</p></td>
<td><p>mbbo/mbbi</p></td>
<td><p>ARAVIS_SHIFT_DIR</p></td>
<td><p>Controls how UInt16 data are shifted. Choices are [0:”None”, 1:”Left”, 2:”Right”].
The number of bits to shift is controlled by the ARShiftBits record.</p></td>
</tr>
<tr class="row-odd"><td><p>ARShiftBits, ARShiftBits_RBV</p></td>
<td><p>mbbo/mbbi</p></td>
<td><p>ARAVIS_SHIFT_BITS</p></td>
<td><p>Controls how many bits UInt16 data are shifted left or right. Choices are 1-8.
The direction to shift is controlled by the ARShiftDir record.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="ioc-startup-script">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">IOC startup script</a><a class="headerlink" href="#ioc-startup-script" title="Link to this heading"></a></h2>
<p>The command to configure an ADAravis camera in the startup script is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">aravisConfig</span><span class="p">(</span><span class="n">const</span> <span class="n">char</span> <span class="o">*</span><span class="n">portName</span><span class="p">,</span> <span class="n">const</span> <span class="n">char</span> <span class="o">*</span><span class="n">cameraName</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">maxMemory</span><span class="p">,</span> <span class="nb">int</span> <span class="n">priority</span><span class="p">,</span> <span class="nb">int</span> <span class="n">stackSize</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">portName</span></code> is the name for the ADAravis port driver</p>
<p><code class="docutils literal notranslate"><span class="pre">cameraName</span></code> is the identifier for the camera.  It can be the complete camera name returned by arv-tool, for example
<code class="docutils literal notranslate"><span class="pre">&quot;Point</span> <span class="pre">Grey</span> <span class="pre">Research-Blackfly</span> <span class="pre">S</span> <span class="pre">BFS-PGE-50S5C-18585624&quot;</span></code>, or it can be an IP address for GigE and 10 GigE cameras, for
example <code class="docutils literal notranslate"><span class="pre">&quot;164.54.160.117&quot;</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">maxMemory</span></code> is the maximum amount of memory the NDArrayPool is allowed to allocate.  0 means unlimited.</p>
<p><code class="docutils literal notranslate"><span class="pre">priority</span></code> is the priority of the port thread.  0 means medium priority.</p>
<p><code class="docutils literal notranslate"><span class="pre">stackSize</span></code> is the stack size.  0 means medium size.</p>
</section>
<section id="medm-screens">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">MEDM screens</a><a class="headerlink" href="#medm-screens" title="Link to this heading"></a></h2>
<p>The following is the MEDM screen ADAravis.adl when controlling a FLIR Oryx 51S5M 10 Gbit Ethernet camera.
ADAravis.adl is very similar to ADGenICam.adl, with a few additional widgets for the PVs that are
specific to ADAravis.</p>
<p>Note that each frame is 4.8 MB, and it is collecting 162 frames/s, which is 775 MB/s.</p>
<figure class="align-center">
<img alt="../_images/ADAravis.png" src="../_images/ADAravis.png" />
</figure>
<p>The following is the MEDM screen FLIR_ORX_10g_51S5M-features1.adl when controlling a FLIR Oryx 51S5M 10 Gbit Ethernet camera.
This screen was autogenerated by the Python script in <a class="reference internal" href="../ADGenICam/ADGenICam.html"><span class="doc">ADGenICam</span></a>, and is specific to this camera model.
It is loaded from the “Camera-specific features” related display widget in the above screen.</p>
<figure class="align-center">
<img alt="../_images/ADAravis_features1.png" src="../_images/ADAravis_features1.png" />
</figure>
<p>The following is the second feature screen generated by the Python program described above.</p>
<figure class="align-center">
<img alt="../_images/ADAravis_features2.png" src="../_images/ADAravis_features2.png" />
</figure>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../ADAndor3/ADAndorDoc.html" class="btn btn-neutral float-left" title="ADAndor3" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../ADCSimDetector/ADCSimDetectorDoc.html" class="btn btn-neutral float-right" title="ADCSimDetector" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Mark Rivers.
      <span class="lastupdated">Last updated on 2024-January-02.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>