<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ADAndor3 &mdash; areaDetector Support</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme_overrides.css?v=254ed751" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="ADAravis" href="../ADAravis/ADAravis.html" />
    <link rel="prev" title="Example st.cmd Startup File" href="../ADAndor/st_cmd.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            areaDetector
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../readme.html">Readme</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../user_guide.html">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../ADCore/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ADCore/arch.html">Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ADCore/asynPortDriver.html">asynPortDriver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ADCore/NDArray.html">NDArray</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../detector_drivers.html">Detector Drivers</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../ADCore/guidelines.html">Guidelines and rules for drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADCore/ADDriver.html">ADDriver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADAndor/andorDoc.html">ADAndor</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">ADAndor3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#table-of-contents">Table of Contents</a></li>
<li class="toctree-l4"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#implementation-of-standard-driver-parameters">Implementation of standard driver parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#andor-specific-parameters">Andor specific parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#unsupported-standard-driver-parameters">Unsupported standard driver parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#medm-screen">MEDM screen</a></li>
<li class="toctree-l4"><a class="reference internal" href="#restrictions">Restrictions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ADAravis/ADAravis.html">ADAravis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADCSimDetector/ADCSimDetectorDoc.html">ADCSimDetector</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADDexela/ADDexela.html">ADDexela</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADEiger/eiger.html">ADEiger</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADEuresys/ADEuresys.html">ADEuresys</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADFastCCD/index.html">ADFastCCD</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADGenICam/ADGenICam.html">ADGenICam</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADLambda/ADLambda.html">ADLambda</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADLightField/ADLightField.html">ADLightField</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADmarCCD/marCCDDoc.html">ADmarCCD</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADmar345/mar345Doc.html">ADmar345</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADPerkinElmer/PerkinElmerDoc.html">ADPerkinElmer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADPICam/PICamDoc.html">ADPICam</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADPilatus/pilatusDoc.html">ADPilatus</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADPixirad/ADPixirad.html">ADPixirad</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADPointGrey/PointGreyDoc.html">ADPointGrey</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADProsilica/ADProsilica.html">ADProsilica</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADPvCam/pvcamDoc.html">ADPvCam</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADPylon/ADPylon.html">ADPylon</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADQImaging/QImagingDoc.html">ADQImaging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADRIXSCam/ADRIXSCam.html">ADRIXSCam</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADSimDetector/simDetector.html">ADSimDetector</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADSpinnaker/ADSpinnaker.html">ADSpinnaker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADVimba/ADVimba.html">ADVimba</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADURL/ADURL.html">ADURL</a></li>
<li class="toctree-l3"><a class="reference internal" href="../NDDriverStdArrays/NDDriverStdArraysDoc.html">NDDriverStdArrays</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pvaDriver/pvaDriver.html">pvaDriver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../specsAnalyser/index.html">specsAnalyser</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ADCore/plugins.html">areaDetector Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../additional_plugins.html">Additional plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ADCore/medm.html">MEDM screens</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ADViewers/ad_viewers.html">areaDetector Viewers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../acknowledgements.html">Acknowledgements and licenses</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../install_guide.html">Install Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">Top-level Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ADCore_release.html">ADCore Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ADSupport_release.html">ADSupport Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doxygen.html">Source Code Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../detectors.html">Supported Detectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../legacy_versions.html">Legacy Versions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">areaDetector</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../user_guide.html">areaDetector Users Guide</a></li>
          <li class="breadcrumb-item"><a href="../detector_drivers.html">Detector Drivers</a></li>
      <li class="breadcrumb-item active">ADAndor3</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/ADAndor3/ADAndorDoc.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="adandor3">
<h1><a class="toc-backref" href="#id1" role="doc-backlink">ADAndor3</a><a class="headerlink" href="#adandor3" title="Link to this heading"></a></h1>
<dl class="field-list simple">
<dt class="field-odd">author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Mark Rivers (University of Chicago), Phillip Sorensen (Cornell University)</p>
</dd>
</dl>
<section id="table-of-contents">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Table of Contents</a><a class="headerlink" href="#table-of-contents" title="Link to this heading"></a></h2>
<nav class="contents" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#adandor3" id="id1">ADAndor3</a></p>
<ul>
<li><p><a class="reference internal" href="#table-of-contents" id="id2">Table of Contents</a></p></li>
<li><p><a class="reference internal" href="#introduction" id="id3">Introduction</a></p></li>
<li><p><a class="reference internal" href="#implementation-of-standard-driver-parameters" id="id4">Implementation of standard driver parameters</a></p></li>
<li><p><a class="reference internal" href="#andor-specific-parameters" id="id5">Andor specific parameters</a></p></li>
<li><p><a class="reference internal" href="#unsupported-standard-driver-parameters" id="id6">Unsupported standard driver parameters</a></p></li>
<li><p><a class="reference internal" href="#usage" id="id7">Usage</a></p></li>
<li><p><a class="reference internal" href="#configuration" id="id8">Configuration</a></p></li>
<li><p><a class="reference internal" href="#medm-screen" id="id9">MEDM screen</a></p></li>
<li><p><a class="reference internal" href="#restrictions" id="id10">Restrictions</a></p></li>
</ul>
</li>
</ul>
</nav>
</section>
<section id="introduction">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Introduction</a><a class="headerlink" href="#introduction" title="Link to this heading"></a></h2>
<p>This is an <a class="reference external" href="http://www.aps.anl.gov/epics">EPICS</a>
<a class="reference external" href="areaDetector.html">areaDetector</a> driver for CMOS detectors from
<a class="reference external" href="http://www.andor.com">Andor Technology</a>. It has been tested on the
Andor Neo sCMOS camera with 3-tap Camera Link interface, but should work
with other cameras (e.g. Zyla) as well. The driver is supported on
32-bit and 64- bit Linux and 32-bit and 64-bit Windows. The driver is
called “Andor3” because it is built with Version 3 of the Andor Software
Development Kit (SDK). This version of the SDK is required to work with
the Andor sCMOS cameras, and currently does <strong>not</strong> work with the Andor
CCD cameras.</p>
<p>The driver provides access to essentially all of the features of the
Andor sCMOS cameras:</p>
<ul class="simple">
<li><p>Fixed number of frames or continuous acquisition.</p></li>
<li><p>Multiple accumulations per frame.</p></li>
<li><p>Readout frequency</p></li>
<li><p>Readout mode (11-bit low noise, 11-bit high-well, 16 bit
combination).</p></li>
<li><p>Support for all of the Andor trigger modes</p></li>
<li><p>Binning and Area Of Interest (AOI) readout</p></li>
<li><p>Set and monitor the camera temperature</p></li>
<li><p>Set the camera fan speed.</p></li>
<li><p>Gating and Image Intensifier settings</p></li>
</ul>
<p>This driver inherits from <a class="reference external" href="areaDetectorDoc.html#ADDriver">ADDriver</a>.
It implements many of the parameters in
<a class="reference external" href="../areaDetectorDoxygenHTML/asyn_n_d_array_driver_8h.html">asynNDArrayDriver.h</a>
and in
<a class="reference external" href="../areaDetectorDoxygenHTML/_a_d_driver_8h.html">ADArrayDriver.h</a>. It
also implements a number of parameters that are specific to the Andor
detectors. The <a class="reference external" href="../areaDetectorDoxygenHTML/classandor3.html">andor3 class
documentation</a> describes
this class in detail.</p>
<p>This document does not attempt to explain the meaning of the
Andor-specific parameters. The Andor Software Development Kit
documentation provides this detailed information. Andor does not allow
me to redistribute the SDK documentation as part of areaDetector. It
must be obtained from <a class="reference external" href="http://www.andor.com/scientific-software/software-development-kit/andor-sdk">Andor’s Web
site</a>.</p>
<p>The Andor3 SDK is very well designed. Camera parameters (e.g. exposure
time, binning) are called “features”. Features can be integer, float,
bool, string, or enum. Each feature can be queried to determine if it is
implemented on the current detector. In addition:</p>
<ul class="simple">
<li><p>For integer and float features:</p>
<ul>
<li><p>What is the valid range of values for the current camera under the
current conditions?</p></li>
</ul>
</li>
<li><p>For enum features</p>
<ul>
<li><p>How many enum choices are there?</p></li>
<li><p>For each enum choice:</p>
<ul>
<li><p>What is the string associated with that enum choice?</p></li>
<li><p>Is that choice implemented for the current camera?</p></li>
<li><p>If it is implemented, is it valid under the current conditions?</p></li>
</ul>
</li>
</ul>
</li>
<li><p>Ability to register a user-defined C callback function that will be
called whenever a feature value changes. These changes can be the
indirect result of changing another feature. For example, changing
the binning might force the exposure time to change, etc.</p></li>
</ul>
<p>The areaDetector driver uses these features. All of the enum menus are
built dynamically at iocInit, they are not preset in the template file.
This ensures that the enum choices match the actual capabilities of the
current camera. Whenever an integer or float parameter is changed it is
checked to ensure it is within the current valid bounds for that
feature. The feature callback is used to ensure that the current EPICS
readback value of that parameter matches the actual camera value,
without requiring the driver to poll.</p>
<p>areaDetector includes the header and library files required to build the
andor3 driver on any Linux or Windows computer. However, it does not
include the shareable libraries, DLLs or drivers to actually run a
detector. Those must be obtained from Andor, either by purchasing their
SDK or their Solis application software. On Windows the path to the
directory containing the Andor DLLs from the SDK or Solis must be added
to the PATH environment variable when running the areaDetector IOC. On
Linux the path to the directory containing the Andor shareable libraries
from the SDK must be added to the LD_LIBRARY_PATH environment variable
when running the areaDetector IOC.</p>
<p>Note: Linux drivers and Bitflow based camera may require the removal of
files /usr/local/lib/libatusb*. These files sometime interfere with
Bitflow based cameras on Linux (per Andor).</p>
</section>
<section id="implementation-of-standard-driver-parameters">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Implementation of standard driver parameters</a><a class="headerlink" href="#implementation-of-standard-driver-parameters" title="Link to this heading"></a></h2>
<p>The following table describes how the Andor driver implements some of
the standard driver parameters.</p>
<table class="table-bordered table-striped table-hover docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 10.0%" />
<col style="width: 80.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head" colspan="3"><p><strong>Implementation of Parameters in asynNDArrayDriver.h and ADDriver.h, and EPICS Record
Definitions in ADBase.template and NDFile.template</strong></p></th>
</tr>
<tr class="row-even"><th class="head"><p>Parameter index variable</p></th>
<th class="head"><p>EPICS record name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-odd"><td><p>ADTriggerMode</p></td>
<td><p>$(P)$(R)TriggerMode, $(P)$(R)TriggerMode_RBV</p></td>
<td><p>Sets the trigger mode for the detector. Options for the Neo are:
<br> Internal <br>
Software <br>
External <br>
External Start <br>
External Exposure <br>
Advanced <br></p></td>
</tr>
<tr class="row-even"><td><p>ADImageMode</p></td>
<td><p>$(P)$(R)ImageMode, $(P)$(R)ImageMode_RBV</p></td>
<td><p>Sets the image mode for the detector. Options are:
<br> Fixed <br>
Continuous <br>
Fixed counts collects NumImages images, continuous acquires continuously until acquisition is stopped.</p></td>
</tr>
<tr class="row-odd"><td><p>ADNumExposures</p></td>
<td><p>$(P)$(R)NumExposures, $(P)$(R)NumExposures_RBV</p></td>
<td><p>Sets the number of accumulations per image. This is performed in Andor’s driver, not on the chip.</p></td>
</tr>
<tr class="row-even"><td><p>ADNumImages</p></td>
<td><p>$(P)$(R)NumImages, $(P)$(R)NumImages_RBV</p></td>
<td><p>Sets the number of images to take when ImageMode=Fixed.</p></td>
</tr>
<tr class="row-odd"><td><p>ADAcquirePeriod</p></td>
<td><p>$(P)$(R)AcquirePeriod, $(P)$(R)AcquirePeriod_RBV</p></td>
<td><p>Sets the FrameRate (=1./AcquirePeriod). The FrameRate can also be set directly.
<br> The minimum AcquirePeriod (maximum FrameRate) depends on a number of other parameters,
including the A3Binning, SizeX, SizeY, ReadoutRate, A3ShutterMode, PixelEncoding,
and Overlap.</p></td>
</tr>
<tr class="row-even"><td><p>NDDataType</p></td>
<td><p>$(P)$(R)DataType, $(P)$(R)DataType_RBV</p></td>
<td><p>The data type for the image data. Allowed values are:
<br> UInt16 <br>
UInt32 <br>
The DataType is selected automatically, based upon the PixelEncoding record. The
data type will be UInt32 if PixelEncoding is Mono32, and UInt16 for all other values
of PixelEncoding. PixelEncoding=Mono32 can be used when A3Binning &amp;gt; 1x1, or when
multiple accumulations (NumExposures &amp;gt; 1) could cause 16-bit overflow.</p></td>
</tr>
<tr class="row-odd"><td><p>ADTemperature</p></td>
<td><p>$(P)$(R)Temperature, $(P)$(R)Temperature_RBV</p></td>
<td><p>Sets the setpoint temperature of the camera.</p></td>
</tr>
<tr class="row-even"><td><p>ADTemperatureActual</p></td>
<td><p>$(P)$(R)TemperatureActual</p></td>
<td><p>Reads the actual temperature of the camera.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="andor-specific-parameters">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Andor specific parameters</a><a class="headerlink" href="#andor-specific-parameters" title="Link to this heading"></a></h2>
<table class="table-bordered table-striped table-hover docutils align-default">
<colgroup>
<col style="width: 7.7%" />
<col style="width: 7.7%" />
<col style="width: 3.8%" />
<col style="width: 61.5%" />
<col style="width: 7.7%" />
<col style="width: 7.7%" />
<col style="width: 3.8%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head" colspan="7"><p><strong>Parameter Definitions in andor3.cpp and EPICS Record Definitions in andor3.template</strong></p></th>
</tr>
<tr class="row-even"><th class="head"><p>Parameter index variable</p></th>
<th class="head"><p>asyn interface</p></th>
<th class="head"><p>Access</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>drvInfo string</p></th>
<th class="head"><p>EPICS record name</p></th>
<th class="head"><p>EPICS record type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-odd"><td colspan="7"><p><strong>Version information</strong></p></td>
</tr>
<tr class="row-even"><td><p>Andor3SerialNumber</p></td>
<td><p>asynOctet</p></td>
<td><p>R/O</p></td>
<td><p>Camera serial number</p></td>
<td><p>A3_SERIAL_NUMBER</p></td>
<td><p>SerialNumber</p></td>
<td><p>stringin</p></td>
</tr>
<tr class="row-odd"><td><p>Andor3FirmwareVersion</p></td>
<td><p>asynOctet</p></td>
<td><p>R/O</p></td>
<td><p>Camera firmware version</p></td>
<td><p>A3_FIRMWARE_VERSION</p></td>
<td><p>FirmwareVersion</p></td>
<td><p>stringin</p></td>
</tr>
<tr class="row-even"><td><p>Andor3SoftwareVersion</p></td>
<td><p>asynOctet</p></td>
<td><p>R/O</p></td>
<td><p>SDK software version</p></td>
<td><p>A3_SOFTWARE_VERSION</p></td>
<td><p>SoftwareVersion</p></td>
<td><p>stringin</p></td>
</tr>
<tr class="row-odd"><td><p>Andor3ControllerID</p></td>
<td><p>asynOctet</p></td>
<td><p>R/O</p></td>
<td><p>Camera controller ID</p></td>
<td><p>A3_CONTROLLER_ID</p></td>
<td><p>ControllerID</p></td>
<td><p>stringin</p></td>
</tr>
<tr class="row-even"><td colspan="7"><p><strong>Cooling control and status</strong></p></td>
</tr>
<tr class="row-odd"><td><p>Andor3SensorCooling</p></td>
<td><p>asynInt32</p></td>
<td><p>R/W</p></td>
<td><p>Turn the sensor cooler on and off</p></td>
<td><p>A3_SENSOR_COOLING</p></td>
<td><p>SensorCooling, SensorCooling_RBV</p></td>
<td><p>bo, bi</p></td>
</tr>
<tr class="row-even"><td><p>Andor3TempStatus</p></td>
<td><p>asynInt32</p></td>
<td><p>R/O</p></td>
<td><p>Temperature status. Values and strings on the Neo are:
<br> 0 = Cooler Off <br>
1 = Stabilized <br>
2 = Cooling <br>
3 = Drift <br>
4 = Not Stabilized <br>
5 = Fault <br></p></td>
<td><p>A3_TEMP_STATUS</p></td>
<td><p>TempStatus_RBV</p></td>
<td><p>mbbi</p></td>
</tr>
<tr class="row-odd"><td><p>Andor3TempControl</p></td>
<td><p>asynInt32</p></td>
<td><p>R/W</p></td>
<td><p>Temperature setpoint value in degrees C. On the cooled cameras (e.g. Neo) the temperature
is set to discrete values, rather than continuously with the Temperature record,
because the firmware does pixel corrections for specific temperatures. Choices on
the Neo are:
<br> 0 = -15 <br>
1 = -20 <br>
2 = -25 <br>
3 = -30 <br>
4 = -35 <br>
5 = -40 <br></p></td>
<td><p>A3_TEMP_CONTROL</p></td>
<td><p>TempControl, TempControl_RBV</p></td>
<td><p>mbbo, mbbi</p></td>
</tr>
<tr class="row-even"><td><p>Andor3FanSpeed</p></td>
<td><p>asynInt32</p></td>
<td><p>R/W</p></td>
<td><p>Fan speed. Choices on the Neo are:
<br> 0 = Off <br>
1 = Low <br>
2 = On <br></p></td>
<td><p>A3_FAN_SPEED</p></td>
<td><p>FanSpeed, FanSpeed_RBV</p></td>
<td><p>mbbo, mbbi</p></td>
</tr>
<tr class="row-odd"><td colspan="7"><p><strong>Readout control and status</strong></p></td>
</tr>
<tr class="row-even"><td><p>Andor3ShutterMode</p></td>
<td><p>asynInt32</p></td>
<td><p>R/W</p></td>
<td><p>Selects the shutter mode. Choices for the Neo are:
<br> 0 = Rolling <br>
1 = Global <br>
Rolling shutter mode interleaves exposure and readout. This is the fastest readout
mode, but means that each row of the sensor acquires data for a different time period.
In Rolling mode the exposure time is determined by the row readout time, and cannot
be independently controlled. In Global mode all pixels acquire for the same time
period and are then read out. The exposure time is independent of the readout time,
and can be as short as 9 microseconds on the Neo.</p></td>
<td><p>A3_SHUTTER_MODE</p></td>
<td><p>A3ShutterMode, A3ShutterMode_RBV</p></td>
<td><p>mbbo, mbbi</p></td>
</tr>
<tr class="row-odd"><td><p>Andor3FrameRate</p></td>
<td><p>asynFloat64</p></td>
<td><p>R/W</p></td>
<td><p>Frame rate. This is the reciprocal of ADAcquirePeriod, and is the units used to
control the Andor cameras. There are two limitations on the frame rate:
<br> The maximum rate that the sensor can be read out into the RAM on the camera head.
The driver will limit the FrameRate to this value in all cases. This value can be
obtained for the current acquisition settings by typing “asynReport 1” to get a
detailed report from the Andor3 driver. <br>
The maximum sustained frame transfer rate that the interface (e.g. CameraLink
card) can support. This value is contained in the TransferRate PV. It is permissible
to exceed this value for a limited number of frames, allowing the frames to accumulate
in the camera head RAM. The number of frames that will fit in the camera head RAM
is controlled by the PixelEncoding and the AOI parameters (A3Binning, SizeX, SizeY).
If the camera head RAM fills up the acquisition will hang, and must be stopped and
restarted. <br></p></td>
<td><p>A3_FRAME_RATE</p></td>
<td><p>FrameRate, FrameRate_RBV</p></td>
<td><p>ao, ai</p></td>
</tr>
<tr class="row-even"><td><p>Andor3TransferRate</p></td>
<td><p>asynFloat64</p></td>
<td><p>R/O</p></td>
<td><p>The maximum transfer rate in frames/s of the interface (e.g. CameraLink card). This
is the maximum sustained FrameRate which can be achieved.</p></td>
<td><p>A3_TRANSFER_RATE</p></td>
<td><p>TransferRate</p></td>
<td><p>ai</p></td>
</tr>
<tr class="row-odd"><td><p>Andor3PreAmpGain</p></td>
<td><p>asynInt32</p></td>
<td><p>R/W</p></td>
<td><p>Controls the pre-amp gain and readout mode. Choices for the Neo are:
<br> 0 = 11-bit (high well capacity) <br>
1 = 11-bit (low noise) <br>
2 = 16-bit (low noise &amp;amp; high well capacity) <br></p></td>
<td><p>A3_PRE_AMP_GAIN</p></td>
<td><p>PreAmpGain, PreAmpGain_RBV</p></td>
<td><p>mbbo, mbbi</p></td>
</tr>
<tr class="row-even"><td><p>Andor3PixelEncoding</p></td>
<td><p>asynInt32</p></td>
<td><p>R/W</p></td>
<td><p>Controls the pixel encoding. Choices for the Neo are:
<br> 0 = Mono12 <br>
1 = Mono12Packed <br>
2 = Mono16 <br>
9 = Mono32 <br>
Mono12 and Mono12Packed are only available when PreAmpGain is one of the 11-bit
modes.</p></td>
<td><p>A3_PIXEL_ENCODING</p></td>
<td><p>PixelEncoding, PixelEncoding_RBV</p></td>
<td><p>mbbo, mbbi</p></td>
</tr>
<tr class="row-odd"><td><p>Andor3ReadoutRate</p></td>
<td><p>asynInt32</p></td>
<td><p>R/W</p></td>
<td><p>Controls the ADC readout rate. Choices for the Neo are:
<br> 0 = 100 MHz <br>
1 = 200 MHz <br>
2 = 280 MHz <br></p></td>
<td><p>A3_READOUT_RATE</p></td>
<td><p>ReadoutRate, ReadoutRate_RBV</p></td>
<td><p>mbbo, mbbi</p></td>
</tr>
<tr class="row-even"><td><p>Andor3ReadoutTime</p></td>
<td><p>asynFloat64</p></td>
<td><p>R/O</p></td>
<td><p>The readout time from the sensor into camera RAM.</p></td>
<td><p>A3_READOUT_TIME</p></td>
<td><p>ReadoutTime</p></td>
<td><p>ai</p></td>
</tr>
<tr class="row-odd"><td><p>Andor3Overlap</p></td>
<td><p>asynInt32</p></td>
<td><p>R/W</p></td>
<td><p>Controls whether acquisition and readout are overlapped. Choices are 0 (No) and
1 (Yes). On the Neo if Overlap=Yes then the minimum exposure time is limited to
about 10 ms. If Overlap=No then the minimum exposure time is 9 microseconds.</p></td>
<td><p>A3_OVERLAP</p></td>
<td><p>Overlap, Overlap_RBV</p></td>
<td><p>bo, bi</p></td>
</tr>
<tr class="row-even"><td><p>Andor3NoiseFilter</p></td>
<td><p>asynInt32</p></td>
<td><p>R/W</p></td>
<td><p>Controls whether the firmware applies the Spurious Noise Filter. Choices are 0 (No)
and 1 (Yes).</p></td>
<td><p>A3_NOISE_FILTER</p></td>
<td><p>NoiseFilter, NoiseFilter_RBV</p></td>
<td><p>bo, bi</p></td>
</tr>
<tr class="row-odd"><td colspan="7"><p><strong>Trigger control</strong></p></td>
</tr>
<tr class="row-even"><td><p>Andor3SoftwareTrigger</p></td>
<td><p>asynInt32</p></td>
<td><p>R/W</p></td>
<td><p>Writing 1 to this record generates a software trigger if TriggerMode=Software.</p></td>
<td><p>A3_SOFTWARE_TRIGGER</p></td>
<td><p>SoftwareTrigger</p></td>
<td><p>bo</p></td>
</tr>
<tr class="row-odd"><td colspan="7"><p><strong>Area-Of-Interest (AOI) Control</strong></p></td>
</tr>
<tr class="row-even"><td><p>Andor3FullAOIControl</p></td>
<td><p>asynInt32</p></td>
<td><p>R/O</p></td>
<td><p>Indicates whether this camera supports full AOI control. This is Yes for the Neo.</p></td>
<td><p>A3_FULL_AOI_CONTROL</p></td>
<td><p>FullAOIControl</p></td>
<td><p>bi</p></td>
</tr>
<tr class="row-odd"><td><p>Andor3Binning</p></td>
<td><p>asynInt32</p></td>
<td><p>R/W</p></td>
<td><p>Controls the binning. The binning on the sCMOS camera is done in firmware and only
certain preset values are allowed. Choices for the Neo are:
<br> 0 = 1x1 <br>
1 = 2x2 <br>
2 = 3x3 <br>
3 = 4x4 <br>
4 = 8x8 <br></p></td>
<td><p>A3_BINNING</p></td>
<td><p>A3Binning, A3Binning_RBV</p></td>
<td><p>mbbo, mbbi</p></td>
</tr>
<tr class="row-even"><td colspan="7"><p><strong>Gating and Image Intensifier Control</strong></p></td>
</tr>
<tr class="row-odd"><td><p>Andor3GateMode</p></td>
<td><p>asynInt32</p></td>
<td><p>R/W</p></td>
<td><p>Selects the photocathode gating mode. Choices for the iStar are:
<br> 0 = CWOn <br>
1 = CWOff <br>
2 = FireOnly <br>
3 = GateOnly <br>
4 = FireAndGate <br>
5 = DDG <br></p></td>
<td><p>A3_GATE_MODE</p></td>
<td><p>GateMode, GateMode_RBV</p></td>
<td><p>mbbo, mbbi</p></td>
</tr>
<tr class="row-even"><td><p>Andor3InsertionDelay</p></td>
<td><p>asynInt32</p></td>
<td><p>R/W</p></td>
<td><p>Configures the duration of the gate insertion delay. Choices for the iStar are:
<br> 0 = Normal <br>
1 = Fast <br>
Fast mode is not available in CW gate modes.</p></td>
<td><p>A3_INSERTION_DELAY</p></td>
<td><p>InsertionDelay, InsertionDelay_RBV</p></td>
<td><p>mbbo, mbbi</p></td>
</tr>
<tr class="row-odd"><td><p>Andor3MCPGain</p></td>
<td><p>asynInt32</p></td>
<td><p>R/W</p></td>
<td><p>Controls the voltage applied across the microchannel plate. Range for the iStar is 0-4095.</p></td>
<td><p>A3_MCP_GAIN</p></td>
<td><p>MCPGain, MCPGain_RBV</p></td>
<td><p>longout, longin</p></td>
</tr>
<tr class="row-even"><td><p>Andor3MCPIntelligate</p></td>
<td><p>asynInt32</p></td>
<td><p>R/W</p></td>
<td><p>Enables or disables the MCP Intelligate mode. Only available when Normal
insertion delay is selected. Choices are 0 (Off) and 1 (On).</p></td>
<td><p>A3_MCP_INTELLIGATE</p></td>
<td><p>MCPIntelligate, MCPIntelligate_RBV</p></td>
<td><p>bo, bi</p></td>
</tr>
</tbody>
</table>
<p>The Andor driver implements the following parameters in addition to
those in asynNDArrayDriver.h and ADDriver.h.</p>
</section>
<section id="unsupported-standard-driver-parameters">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Unsupported standard driver parameters</a><a class="headerlink" href="#unsupported-standard-driver-parameters" title="Link to this heading"></a></h2>
<p>ColorMode, ReverseX, and ReverseY are currently not supported.</p>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Link to this heading"></a></h2>
<p>If any of the parameters set are out of range the driver will set them
to the minimum or maximum allowed value for that parameter. The _RBV
value will indicate the actual value in effect.</p>
</section>
<section id="configuration">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Configuration</a><a class="headerlink" href="#configuration" title="Link to this heading"></a></h2>
<p>The Andor3 driver is created with the andor3Config command, either from
C/C++ or from the EPICS IOC shell.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">int</span> <span class="n">andor3Config</span><span class="p">(</span><span class="n">const</span> <span class="n">char</span> <span class="o">*</span><span class="n">portName</span><span class="p">,</span> <span class="n">const</span> <span class="n">char</span> <span class="o">*</span><span class="n">cameraSerial</span><span class="p">,</span>
                <span class="nb">int</span> <span class="n">maxBuffers</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">maxMemory</span><span class="p">,</span>
                <span class="nb">int</span> <span class="n">priority</span><span class="p">,</span> <span class="nb">int</span> <span class="n">stackSize</span><span class="p">,</span> <span class="nb">int</span> <span class="n">maxFrames</span><span class="p">)</span>
</pre></div>
</div>
<p>For details on the meaning of the parameters to this function refer to
the detailed documentation on the andor3Config function in the
<a class="reference external" href="../areaDetectorDoxygenHTML/andor3_8cpp.html">andor3.cpp documentation</a>
and in the documentation for the constructor for the <a class="reference external" href="../areaDetectorDoxygenHTML/classandor3.html">andor3
class</a>. The maxFrames
parameter controls the number of frame buffers the driver queues to the
SDK when acquiring data. The default value is 10. Increasing this number
will allow the SDK to transfer images from the camera at the full
interface speed even when the driver is not reading them that quickly.
This will help to prevent frames from filling the camera RAM when
operating close to the maximum interface transfer rate (=TransferRate).</p>
<p>There an example IOC boot directory and startup script
(<a class="reference external" href="andor3_st_cmd.html">iocBoot/iocAndor3/st.cmd)</a> provided with
areaDetector.</p>
</section>
<section id="medm-screen">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">MEDM screen</a><a class="headerlink" href="#medm-screen" title="Link to this heading"></a></h2>
<p>The following shows the MEDM screen that is used to control the Andor
detector. Note that the general purpose screen ADBase.adl can be used,
but it exposes a few controls that are not applicable to the Andor, and
lacks some fields that are important for the Andor.</p>
<p><code class="docutils literal notranslate"><span class="pre">Andor3.adl</span></code> is the main screen used to control the Andor driver.</p>
<div class="docutils container">
<p class="rubric" id="andor3-adl">Andor3.adl</p>
<p><img alt="Andor3.png" src="../_images/Andor3.png" /></p>
</div>
</section>
<section id="restrictions">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">Restrictions</a><a class="headerlink" href="#restrictions" title="Link to this heading"></a></h2>
<p>There is currently no way to query the driver to know how much memory
remains in the on-board RAM. When the RAM fills up the camera stops
acquiring images.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../ADAndor/st_cmd.html" class="btn btn-neutral float-left" title="Example st.cmd Startup File" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../ADAravis/ADAravis.html" class="btn btn-neutral float-right" title="ADAravis" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Mark Rivers.
      <span class="lastupdated">Last updated on 2024-April-14.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>